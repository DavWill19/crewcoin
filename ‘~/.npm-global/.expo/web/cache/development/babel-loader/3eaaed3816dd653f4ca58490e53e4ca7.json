{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { NativeBaseProvider, Box, Container, Heading, Divider, AspectRatio, Stack, HStack, Text, Icon, VStack, Center, StatusBar, Button, Input } from 'native-base';\nimport { Ionicons } from '@expo/vector-icons';\nimport { FlatList, ScrollView } from \"react-native-gesture-handler\";\nimport prizes from \"./sample\";\nimport Counter from \"react-native-counters\";\nimport { useNavigation } from '@react-navigation/native';\nimport { Component, useContext, useEffect } from \"react\";\nimport { UserContext } from \"./UserContext\";\nimport React from \"react\";\nimport * as SecureStore from 'expo-secure-store';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function SendScreen() {\n  var _React$useState = React.useState({}),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      formData = _React$useState2[0],\n      setData = _React$useState2[1];\n\n  var _useContext = useContext(UserContext),\n      value = _useContext.value,\n      setValue = _useContext.setValue;\n\n  var _React$useState3 = React.useState(true),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      isLoading = _React$useState4[0],\n      setIsLoading = _React$useState4[1];\n\n  function Spinner() {\n    if (isLoading) {\n      return _jsx(Image, {\n        alt: \"spinner\",\n        source: require(\"../assets/images/genericspinner.gif\"),\n        style: {\n          marginTop: \"-34%\",\n          width: '32%',\n          height: '20%',\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          zIndex: 20000000,\n          top: \"49%\",\n          resizeMode: \"contain\"\n        }\n      });\n    } else {\n      return null;\n    }\n  }\n\n  function admin() {\n    if (value.admin) {\n      return _jsxs(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          justifyContent: 'center',\n          alignItems: 'center',\n          paddingTop: 10\n        },\n        children: [_jsx(Ionicons, {\n          name: \"md-trash-sharp\",\n          size: 16,\n          color: \"gray\"\n        }), _jsx(Text, {\n          style: {\n            marginLeft: 5,\n            fontSize: 16,\n            fontWeight: 'bold',\n            color: 'gray'\n          },\n          children: \"Long Press Any User to Delete\"\n        })]\n      });\n    } else {\n      return null;\n    }\n  }\n\n  function CoinShow() {\n    var _useContext2 = useContext(UserContext),\n        value = _useContext2.value,\n        setValue = _useContext2.setValue;\n\n    var _React$useState5 = React.useState([]),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        userData = _React$useState6[0],\n        setUser = _React$useState6[1];\n\n    var _React$useState7 = React.useState({}),\n        _React$useState8 = _slicedToArray(_React$useState7, 2),\n        formData = _React$useState8[0],\n        setData = _React$useState8[1];\n\n    var _React$useState9 = React.useState(''),\n        _React$useState10 = _slicedToArray(_React$useState9, 2),\n        token = _React$useState10[0],\n        setToken = _React$useState10[1];\n\n    var navigation = useNavigation();\n\n    function getValueFor(key) {\n      var result;\n      return _regeneratorRuntime.async(function getValueFor$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(SecureStore.getItemAsync(key));\n\n            case 2:\n              result = _context.sent;\n\n              if (result) {\n                setToken(result);\n              } else {\n                console.log('No values stored under that key.');\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    getValueFor('token');\n\n    function askDeleteUser(user) {\n      if (value.admin) {\n        Alert.alert('Delete User', \"Are you sure you want to delete \" + user.firstname + \" \" + user.lastname + \"? This action cannot be undone.\", [{\n          text: 'Cancel',\n          onPress: function onPress() {\n            return console.log('Cancel Pressed');\n          },\n          style: 'cancel'\n        }, {\n          text: 'OK',\n          onPress: function onPress() {\n            deleteUser(user._id);\n          }\n        }], {\n          cancelable: false\n        });\n      }\n    }\n\n    function deleteUser(id) {\n      fetch(\"https://crewcoin.herokuapp.com/crewuser/\" + id, {\n        method: \"DELETE\",\n        headers: {\n          authorization: \"bearer \" + token,\n          credentials: \"same-origin\",\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          mode: \"cors\"\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        if (res.success) {\n          reload();\n          Alert.alert('Success', \"\" + res.status, [{\n            text: 'OK',\n            onPress: function onPress() {\n              return console.log('OK Pressed');\n            },\n            style: 'cancel'\n          }], {\n            cancelable: false\n          });\n        }\n      }).catch(function (err) {\n        Alert.alert('Error', 'Something went wrong!', [{\n          text: 'OK',\n          onPress: function onPress() {\n            return console.log('OK Pressed');\n          },\n          style: 'cancel'\n        }], {\n          cancelable: false\n        });\n      });\n      fetch(\"https://crewcoin.herokuapp.com/crewuser/\" + value.portalId, {\n        method: \"GET\",\n        headers: {\n          authorization: \"bearer \" + token,\n          credentials: \"same-origin\",\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          mode: \"cors\"\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        if (res) {\n          setUser(res);\n\n          var _self = res.filter(function (user) {\n            return user.username === value.username;\n          });\n\n          setValue(_self[0]);\n        } else {\n          Alert.alert(\"Error\", \"Please check your internet connection\", [{\n            text: \"OK\",\n            onPress: function onPress() {\n              return console.log(\"OK Pressed\");\n            }\n          }]);\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n      var user = userData.filter(function (el) {\n        return el.username !== value.username;\n      });\n    }\n\n    function reload() {\n      fetch(\"https://crewcoin.herokuapp.com/crewuser/\" + value.portalId, {\n        method: \"GET\",\n        headers: {\n          authorization: \"bearer \" + token,\n          credentials: \"same-origin\",\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          mode: \"cors\"\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        if (res) {\n          setUser(res);\n\n          var _self2 = res.filter(function (user) {\n            return user.username === value.username;\n          });\n\n          setValue(_self2[0]);\n          setIsLoading(false);\n        } else {\n          Alert.alert(\"Error\", \"Please check your internet connection\", [{\n            text: \"OK\",\n            onPress: function onPress() {\n              return console.log(\"OK Pressed\");\n            }\n          }]);\n          setIsLoading(false);\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n\n    useEffect(function () {\n      setIsLoading(true);\n      fetch(\"https://crewcoin.herokuapp.com/crewuser/\" + value.portalId, {\n        method: \"GET\",\n        headers: {\n          authorization: \"bearer \" + token,\n          credentials: \"same-origin\",\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          mode: \"cors\"\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        if (res) {\n          setUser(res);\n\n          var _self3 = res.filter(function (user) {\n            return user.username === value.username;\n          });\n\n          setValue(_self3[0]);\n          setIsLoading(false);\n        } else {\n          Alert.alert(\"Error\", \"Please check your internet connection\", [{\n            text: \"OK\",\n            onPress: function onPress() {\n              return console.log(\"OK Pressed\");\n            }\n          }]);\n          setIsLoading(false);\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }, []);\n    var removeAdmin = userData.filter(function (el) {\n      return el.admin === false;\n    });\n    var user = removeAdmin.filter(function (el) {\n      return el.username !== value.username;\n    });\n    return user.map(function (user) {\n      var userId = user._id;\n      var username = user.username;\n\n      var triggerPushNotificationHandler = function triggerPushNotificationHandler(token, title, body) {\n        fetch(\"https://exp.host/--/api/v2/push/send\", {\n          method: \"POST\",\n          headers: {\n            Accept: \"application/json\",\n            \"Accept-Encoding\": \"gzip,deflate\",\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            to: token,\n            title: title,\n            body: body\n          })\n        });\n      };\n\n      function coin(cost) {\n        if (cost > 1) {\n          return cost + \" Crew Coins\";\n        } else {\n          return cost + \" Crew Coin\";\n        }\n      }\n\n      function handleReceive(navigation, user, formData, self, userId) {\n        var coinincrease = formData[userId + username];\n        var amount = coinincrease + user.balance;\n\n        var newComment = function newComment() {\n          if (formData[userId] == undefined) {\n            return \"\";\n          } else {\n            return formData[userId];\n          }\n        };\n\n        var comment = newComment();\n        console.log(token);\n        setData(_objectSpread(_objectSpread({}, formData), {}, _defineProperty({}, user._id + user.username, coinincrease)));\n        var secondAmount = value.balance - coinincrease;\n\n        if (value.balance >= coinincrease) {\n          if (coinincrease > 0) {\n            fetch(\"https://crewcoin.herokuapp.com/crewuser/send/\" + userId, {\n              method: \"PUT\",\n              headers: {\n                authorization: \"bearer \" + token,\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json\",\n                mode: \"cors\"\n              },\n              body: JSON.stringify({\n                \"coinincrease\": coinincrease,\n                \"balance\": secondAmount,\n                \"balance2\": amount,\n                \"history\": {\n                  \"date\": new Date(),\n                  \"action\": \"Received\",\n                  \"amount\": coinincrease,\n                  \"balance\": amount,\n                  \"comments\": comment,\n                  \"who\": \"from \" + value.firstname + \" \" + value.lastname\n                },\n                \"history2\": {\n                  \"date\": new Date(),\n                  \"action\": \"Sent\",\n                  \"amount\": coinincrease,\n                  \"balance\": secondAmount,\n                  \"comments\": comment,\n                  \"who\": \"to \" + user.firstname + \" \" + user.lastname\n                },\n                \"userId\": value._id\n              })\n            }).then(function (res) {\n              return res.json();\n            }).then(function (res) {\n              if (res.success) {\n                var _objectSpread3;\n\n                var message = value.firstname + \" \" + value.lastname + \" sent you \" + coin(coinincrease) + \"!\";\n                triggerPushNotificationHandler(user.pushToken, \"Cha-Ching!\", message);\n                setData(_objectSpread(_objectSpread({}, formData), {}, (_objectSpread3 = {}, _defineProperty(_objectSpread3, userId, \"\"), _defineProperty(_objectSpread3, userId + username, coinincrease), _objectSpread3))), reload();\n                Alert.alert(\"Coins Sent!\", \"You sent \" + coin(coinincrease) + \" to \" + (user.firstname + \" \" + user.lastname), [{\n                  text: \"Cancel\",\n                  onPress: function onPress() {\n                    return console.log(\"Cancel Pressed\");\n                  },\n                  style: \"cancel\"\n                }, {\n                  text: \"OK\",\n                  onPress: function onPress() {\n                    return console.log(\"OK Pressed\");\n                  }\n                }]);\n              } else {\n                Alert.alert(\"\" + err, \"Please check internet connection!\", [{\n                  text: \"OK\",\n                  onPress: function onPress() {\n                    return console.log(\"OK Pressed\");\n                  }\n                }]);\n              }\n            }).catch(function (err) {\n              Alert.alert(\"Error\", \"Please login again\", [{\n                text: \"OK\",\n                onPress: function onPress() {\n                  return console.log(\"OK Pressed\");\n                }\n              }]);\n              navigation.navigate(\"Login\");\n            });\n          } else {\n            return null;\n          }\n        } else {\n          Alert.alert(\"You need more crew coins!\", \"You do not have enough crew coins! Current balance: \" + value.balance, [{\n            text: \"Cancel\",\n            onPress: function onPress() {\n              return console.log(\"Cancel Pressed\");\n            },\n            style: \"cancel\"\n          }, {\n            text: \"OK\",\n            onPress: function onPress() {\n              return console.log(\"OK Pressed\");\n            }\n          }]);\n        }\n      }\n\n      function startFunc(data) {\n        if (data == undefined) {\n          return 0;\n        } else {\n          return data + 0;\n        }\n      }\n\n      return _jsx(Box, {\n        style: {\n          width: 500,\n          marginLeft: 0\n        },\n        shadow: 9,\n        mt: \"3\",\n        maxW: \"380\",\n        rounded: \"lg\",\n        overflow: \"hidden\",\n        borderColor: \"coolGray.200\",\n        borderWidth: \"1\",\n        _web: {\n          shadow: 2,\n          borderWidth: 0\n        },\n        _light: {\n          backgroundColor: \"gray.50\"\n        },\n        children: _jsxs(Stack, {\n          children: [_jsx(TouchableOpacity, {\n            delayLongPress: 2000,\n            onLongPress: function onLongPress() {\n              return askDeleteUser(user);\n            },\n            children: _jsxs(HStack, {\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              w: \"100%\",\n              space: 3,\n              justifyContent: \"space-evenly\",\n              children: [_jsx(Text, {\n                width: \"40%\",\n                py: \"3\",\n                px: \"2\",\n                fontSize: \"lg\",\n                color: \"gray.600\",\n                fontWeight: \"600\",\n                children: user.firstname + \" \" + user.lastname\n              }), _jsxs(HStack, {\n                justifyContent: \"center\",\n                children: [_jsx(Counter, {\n                  start: startFunc(0),\n                  count: startFunc(formData[user._id + user.username]),\n                  min: 0,\n                  onChange: function onChange(e) {\n                    setData(_objectSpread(_objectSpread({}, formData), {}, _defineProperty({}, user._id + user.username, e)));\n                  }\n                }, user._id), _jsx(Button, {\n                  ml: \"3\",\n                  onPress: function onPress() {\n                    handleReceive(navigation, user, formData, self, userId);\n                  },\n                  children: \"Send\"\n                })]\n              })]\n            })\n          }), _jsx(Input, {\n            id: user._id,\n            value: formData[user._id],\n            placeholder: \"Comments\",\n            onChangeText: function onChangeText(text) {\n              setData(_objectSpread(_objectSpread({}, formData), {}, _defineProperty({}, user._id, text)));\n            }\n          })]\n        })\n      }, user._id);\n    });\n  }\n\n  return _jsxs(NativeBaseProvider, {\n    children: [_jsx(AppBar, {}), _jsxs(ImageBackground, {\n      imageStyle: {\n        opacity: 0.2\n      },\n      style: styles.image2,\n      source: require(\"../assets/images/splashbg2.png\"),\n      resizeMode: \"cover\",\n      children: [Spinner(), _jsxs(ScrollView, {\n        children: [CoinShow(prizes), admin()]\n      })]\n    }), _jsx(CardBalance, {})]\n  });\n}\n\nfunction AppBar() {\n  var navigation = useNavigation();\n  return _jsxs(_Fragment, {\n    children: [_jsx(Box, {\n      safeAreaTop: true,\n      backgroundColor: \"#f2f2f2\"\n    }), _jsxs(HStack, {\n      borderColor: \"gray.300\",\n      borderWidth: \"1\",\n      bg: \"amber.300\",\n      py: \"2\",\n      px: \"1\",\n      alignItems: \"center\",\n      children: [_jsx(HStack, {\n        space: \"4\",\n        alignItems: \"center\",\n        children: _jsx(Ionicons, {\n          name: \"md-chevron-back-sharp\",\n          size: 24,\n          color: \"black\",\n          onPress: function onPress() {\n            navigation.navigate('Root');\n          }\n        })\n      }), _jsx(HStack, {\n        bg: \"amber.300\",\n        px: \"1\",\n        children: _jsx(Center, {\n          children: _jsx(Heading, {\n            size: \"lg\",\n            color: \"black\",\n            children: \"Send Coins\"\n          })\n        })\n      })]\n    })]\n  });\n}\n\nfunction CardBalance() {\n  var _useContext3 = useContext(UserContext),\n      value = _useContext3.value,\n      setValue = _useContext3.setValue;\n\n  return _jsx(_Fragment, {\n    children: _jsx(VStack, {\n      borderColor: \"gray.300\",\n      borderWidth: \"1\",\n      space: \"4\",\n      bg: \"amber.300\",\n      px: \"2\",\n      mb: \"2\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      children: _jsx(Center, {\n        children: _jsxs(HStack, {\n          children: [_jsx(Image, {\n            style: styles.coinbalance,\n            source: require(\"../assets/images/coinbalance.png\")\n          }), _jsx(Text, {\n            style: styles.icon2,\n            children: value.balance\n          })]\n        })\n      })\n    })\n  });\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  icon: {\n    color: 'black',\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  gif: {\n    width: 80,\n    height: 80,\n    marginTop: -30,\n    marginLeft: -30\n  },\n  icon2: {\n    color: 'black',\n    fontSize: 42,\n    fontWeight: '700',\n    paddingTop: 23,\n    marginTop: 6,\n    opacity: 0.9,\n    fontFamily: 'System'\n  },\n  coin: {\n    width: 200,\n    resizeMode: 'contain',\n    height: 50\n  },\n  coingif: {\n    size: '100%'\n  },\n  coingif: {\n    width: 10\n  },\n  coinbalance: {\n    zIndex: 2,\n    resizeMode: 'contain',\n    width: 210,\n    marginTop: -90,\n    marginBottom: -110\n  },\n  image: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: '100%',\n    height: '100%',\n    resizeMode: 'cover'\n  },\n  image2: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: '100%',\n    height: '100%',\n    marginBottom: 20,\n    marginBottom: 5\n  },\n  title: {\n    width: 400,\n    resizeMode: 'cover',\n    marginTop: -100,\n    marginBottom: -100,\n    margin: -100\n  },\n  header: {\n    marginTop: '15%',\n    marginLeft: '18%',\n    justifyContent: 'flex-start',\n    alignItems: 'flex-start',\n    backgroundColor: '#fff'\n  },\n  BalanceBar: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    borderTopLeftRadius: 60,\n    borderTopRightRadius: 60\n  },\n  center: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  coin2: {\n    width: 80,\n    height: 50\n  }\n});","map":{"version":3,"sources":["C:/Users/DavidWIlliams/Desktop/crewCoin/screens/SendScreen.js"],"names":["NativeBaseProvider","Box","Container","Heading","Divider","AspectRatio","Stack","HStack","Text","Icon","VStack","Center","StatusBar","Button","Input","Ionicons","FlatList","ScrollView","prizes","Counter","useNavigation","Component","useContext","useEffect","UserContext","React","SecureStore","SendScreen","useState","formData","setData","value","setValue","isLoading","setIsLoading","Spinner","require","marginTop","width","height","justifyContent","alignItems","zIndex","top","resizeMode","admin","flex","flexDirection","paddingTop","marginLeft","fontSize","fontWeight","color","CoinShow","userData","setUser","token","setToken","navigation","getValueFor","key","getItemAsync","result","console","log","askDeleteUser","user","Alert","alert","firstname","lastname","text","onPress","style","deleteUser","_id","cancelable","id","fetch","method","headers","authorization","credentials","Accept","mode","then","res","json","success","reload","status","catch","err","portalId","self","filter","username","el","removeAdmin","map","userId","triggerPushNotificationHandler","title","body","JSON","stringify","to","coin","cost","handleReceive","coinincrease","amount","balance","newComment","undefined","comment","secondAmount","Date","message","pushToken","navigate","startFunc","data","shadow","borderWidth","backgroundColor","e","opacity","styles","image2","AppBar","CardBalance","coinbalance","icon2","StyleSheet","create","container","icon","gif","fontFamily","coingif","size","marginBottom","image","margin","header","BalanceBar","position","bottom","left","right","borderTopLeftRadius","borderTopRightRadius","center","coin2"],"mappings":";;;;;;;;;;;;;;AACA,SAASA,kBAAT,EAA6BC,GAA7B,EAAkCC,SAAlC,EAA6CC,OAA7C,EAAsDC,OAAtD,EAA+DC,WAA/D,EAA4EC,KAA5E,EAAmFC,MAAnF,EAA2FC,IAA3F,EAAiGC,IAAjG,EAAuGC,MAAvG,EAA+GC,MAA/G,EAAuHC,SAAvH,EAAkIC,MAAlI,EAA0IC,KAA1I,QAAuJ,aAAvJ;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,8BAArC;AACA,OAAOC,MAAP;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,SAASC,aAAT,QAA8B,0BAA9B;AACA,SAASC,SAAT,EAAoBC,UAApB,EAAgCC,SAAhC,QAAiD,OAAjD;AACA,SAASC,WAAT;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,WAAZ,MAA6B,mBAA7B;;;;AAEA,eAAe,SAASC,UAAT,GAAsB;AACjC,wBAA4BF,KAAK,CAACG,QAAN,CAAe,EAAf,CAA5B;AAAA;AAAA,MAAOC,QAAP;AAAA,MAAiBC,OAAjB;;AACA,oBAA4BR,UAAU,CAACE,WAAD,CAAtC;AAAA,MAAQO,KAAR,eAAQA,KAAR;AAAA,MAAeC,QAAf,eAAeA,QAAf;;AACA,yBAAkCP,KAAK,CAACG,QAAN,CAAe,IAAf,CAAlC;AAAA;AAAA,MAAOK,SAAP;AAAA,MAAkBC,YAAlB;;AAGA,WAASC,OAAT,GAAmB;AACf,QAAIF,SAAJ,EAAe;AACX,aACI,KAAC,KAAD;AAAO,QAAA,GAAG,EAAC,SAAX;AAAqB,QAAA,MAAM,EAAEG,OAAO,uCAApC;AACI,QAAA,KAAK,EAAE;AAAEC,UAAAA,SAAS,EAAE,MAAb;AAAqBC,UAAAA,KAAK,EAAE,KAA5B;AAAmCC,UAAAA,MAAM,EAAE,KAA3C;AAAkDC,UAAAA,cAAc,EAAE,QAAlE;AAA4EC,UAAAA,UAAU,EAAE,QAAxF;AAAkGC,UAAAA,MAAM,EAAE,QAA1G;AAAoHC,UAAAA,GAAG,EAAE,KAAzH;AAAgIC,UAAAA,UAAU,EAAE;AAA5I;AADX,QADJ;AAIH,KALD,MAKO;AACH,aAAO,IAAP;AACH;AACJ;;AAED,WAASC,KAAT,GAAiB;AACb,QAAId,KAAK,CAACc,KAAV,EAAiB;AACb,aACI,MAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAAEC,UAAAA,IAAI,EAAE,CAAR;AAAWC,UAAAA,aAAa,EAAE,KAA1B;AAAiCP,UAAAA,cAAc,EAAE,QAAjD;AAA2DC,UAAAA,UAAU,EAAE,QAAvE;AAAiFO,UAAAA,UAAU,EAAE;AAA7F,SAAb;AAAA,mBACI,KAAC,QAAD;AAAU,UAAA,IAAI,EAAC,gBAAf;AAAgC,UAAA,IAAI,EAAE,EAAtC;AAA0C,UAAA,KAAK,EAAC;AAAhD,UADJ,EAEI,KAAC,IAAD;AAAM,UAAA,KAAK,EAAE;AAAEC,YAAAA,UAAU,EAAE,CAAd;AAAiBC,YAAAA,QAAQ,EAAE,EAA3B;AAA+BC,YAAAA,UAAU,EAAE,MAA3C;AAAmDC,YAAAA,KAAK,EAAE;AAA1D,WAAb;AAAA;AAAA,UAFJ;AAAA,QADJ;AAMH,KAPD,MAOO;AACH,aACI,IADJ;AAGH;AACJ;;AAED,WAASC,QAAT,GAAoB;AAChB,uBAA4B/B,UAAU,CAACE,WAAD,CAAtC;AAAA,QAAQO,KAAR,gBAAQA,KAAR;AAAA,QAAeC,QAAf,gBAAeA,QAAf;;AACA,2BAA4BP,KAAK,CAACG,QAAN,CAAe,EAAf,CAA5B;AAAA;AAAA,QAAO0B,QAAP;AAAA,QAAiBC,OAAjB;;AACA,2BAA4B9B,KAAK,CAACG,QAAN,CAAe,EAAf,CAA5B;AAAA;AAAA,QAAOC,QAAP;AAAA,QAAiBC,OAAjB;;AACA,2BAA0BL,KAAK,CAACG,QAAN,CAAe,EAAf,CAA1B;AAAA;AAAA,QAAO4B,KAAP;AAAA,QAAcC,QAAd;;AACA,QAAMC,UAAU,GAAGtC,aAAa,EAAhC;;AAEA,aAAeuC,WAAf,CAA2BC,GAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CACuBlC,WAAW,CAACmC,YAAZ,CAAyBD,GAAzB,CADvB;;AAAA;AACQE,cAAAA,MADR;;AAEI,kBAAIA,MAAJ,EAAY;AACRL,gBAAAA,QAAQ,CAACK,MAAD,CAAR;AACH,eAFD,MAEO;AACHC,gBAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ;AACH;;AANL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAQAL,IAAAA,WAAW,CAAC,OAAD,CAAX;;AAIA,aAASM,aAAT,CAAuBC,IAAvB,EAA6B;AACzB,UAAInC,KAAK,CAACc,KAAV,EAAiB;AACbsB,QAAAA,KAAK,CAACC,KAAN,CACI,aADJ,uCAEuCF,IAAI,CAACG,SAF5C,SAEyDH,IAAI,CAACI,QAF9D,sCAII,CACI;AACIC,UAAAA,IAAI,EAAE,QADV;AAEIC,UAAAA,OAAO,EAAE;AAAA,mBAAMT,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAAN;AAAA,WAFb;AAGIS,UAAAA,KAAK,EAAE;AAHX,SADJ,EAMI;AACIF,UAAAA,IAAI,EAAE,IADV;AACgBC,UAAAA,OAAO,EAAE,mBAAM;AACvBE,YAAAA,UAAU,CAACR,IAAI,CAACS,GAAN,CAAV;AACH;AAHL,SANJ,CAJJ,EAgBI;AAAEC,UAAAA,UAAU,EAAE;AAAd,SAhBJ;AAmBH;AACJ;;AACD,aAASF,UAAT,CAAoBG,EAApB,EAAwB;AACpBC,MAAAA,KAAK,8CAA4CD,EAA5C,EAAkD;AACnDE,QAAAA,MAAM,EAAE,QAD2C;AAEnDC,QAAAA,OAAO,EAAE;AACLC,UAAAA,aAAa,cAAYzB,KADpB;AAEL0B,UAAAA,WAAW,EAAE,aAFR;AAGLC,UAAAA,MAAM,EAAE,kBAHH;AAIL,0BAAgB,kBAJX;AAKLC,UAAAA,IAAI,EAAE;AALD;AAF0C,OAAlD,CAAL,CAWKC,IAXL,CAWU,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAXb,EAYKF,IAZL,CAYU,UAAAC,GAAG,EAAI;AACT,YAAIA,GAAG,CAACE,OAAR,EAAiB;AACbC,UAAAA,MAAM;AACNtB,UAAAA,KAAK,CAACC,KAAN,CACI,SADJ,OAEOkB,GAAG,CAACI,MAFX,EAGI,CACI;AACInB,YAAAA,IAAI,EAAE,IADV;AAEIC,YAAAA,OAAO,EAAE;AAAA,qBAAMT,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAN;AAAA,aAFb;AAGIS,YAAAA,KAAK,EAAE;AAHX,WADJ,CAHJ,EAUI;AAAEG,YAAAA,UAAU,EAAE;AAAd,WAVJ;AAYH;AACJ,OA5BL,EA6BKe,KA7BL,CA6BW,UAAAC,GAAG,EAAI;AACVzB,QAAAA,KAAK,CAACC,KAAN,CACI,OADJ,EAEI,uBAFJ,EAGI,CACI;AACIG,UAAAA,IAAI,EAAE,IADV;AAEIC,UAAAA,OAAO,EAAE;AAAA,mBAAMT,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAN;AAAA,WAFb;AAGIS,UAAAA,KAAK,EAAE;AAHX,SADJ,CAHJ,EAUI;AAAEG,UAAAA,UAAU,EAAE;AAAd,SAVJ;AAYH,OA1CL;AA4CAE,MAAAA,KAAK,8CAA4C/C,KAAK,CAAC8D,QAAlD,EAA8D;AAC/Dd,QAAAA,MAAM,EAAE,KADuD;AAE/DC,QAAAA,OAAO,EAAE;AACLC,UAAAA,aAAa,cAAYzB,KADpB;AAEL0B,UAAAA,WAAW,EAAE,aAFR;AAGLC,UAAAA,MAAM,EAAE,kBAHH;AAIL,0BAAgB,kBAJX;AAKLC,UAAAA,IAAI,EAAE;AALD;AAFsD,OAA9D,CAAL,CAUKC,IAVL,CAUU,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAVb,EAWKF,IAXL,CAWU,UAAAC,GAAG,EAAI;AACT,YAAIA,GAAJ,EAAS;AACL/B,UAAAA,OAAO,CAAC+B,GAAD,CAAP;;AACA,cAAIQ,KAAI,GAAGR,GAAG,CAACS,MAAJ,CAAW,UAAA7B,IAAI;AAAA,mBAAIA,IAAI,CAAC8B,QAAL,KAAkBjE,KAAK,CAACiE,QAA5B;AAAA,WAAf,CAAX;;AACAhE,UAAAA,QAAQ,CAAC8D,KAAI,CAAC,CAAD,CAAL,CAAR;AACH,SAJD,MAIO;AACH3B,UAAAA,KAAK,CAACC,KAAN,CACI,OADJ,EAEI,uCAFJ,EAGI,CAEI;AAAEG,YAAAA,IAAI,EAAE,IAAR;AAAcC,YAAAA,OAAO,EAAE;AAAA,qBAAMT,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAN;AAAA;AAAvB,WAFJ,CAHJ;AAQH;AACJ,OA1BL,EA2BK2B,KA3BL,CA2BW,UAAAC,GAAG,EAAI;AACV7B,QAAAA,OAAO,CAACC,GAAR,CAAY4B,GAAZ;AACH,OA7BL;AA+BA,UAAI1B,IAAI,GAAGZ,QAAQ,CAACyC,MAAT,CAAgB,UAAAE,EAAE;AAAA,eAAIA,EAAE,CAACD,QAAH,KAAgBjE,KAAK,CAACiE,QAA1B;AAAA,OAAlB,CAAX;AACH;;AAID,aAASP,MAAT,GAAkB;AACdX,MAAAA,KAAK,8CAA4C/C,KAAK,CAAC8D,QAAlD,EAA8D;AAC/Dd,QAAAA,MAAM,EAAE,KADuD;AAE/DC,QAAAA,OAAO,EAAE;AACLC,UAAAA,aAAa,cAAYzB,KADpB;AAEL0B,UAAAA,WAAW,EAAE,aAFR;AAGLC,UAAAA,MAAM,EAAE,kBAHH;AAIL,0BAAgB,kBAJX;AAKLC,UAAAA,IAAI,EAAE;AALD;AAFsD,OAA9D,CAAL,CAUKC,IAVL,CAUU,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAVb,EAWKF,IAXL,CAWU,UAAAC,GAAG,EAAI;AACT,YAAIA,GAAJ,EAAS;AACL/B,UAAAA,OAAO,CAAC+B,GAAD,CAAP;;AACA,cAAIQ,MAAI,GAAGR,GAAG,CAACS,MAAJ,CAAW,UAAA7B,IAAI;AAAA,mBAAIA,IAAI,CAAC8B,QAAL,KAAkBjE,KAAK,CAACiE,QAA5B;AAAA,WAAf,CAAX;;AACAhE,UAAAA,QAAQ,CAAC8D,MAAI,CAAC,CAAD,CAAL,CAAR;AACA5D,UAAAA,YAAY,CAAC,KAAD,CAAZ;AAEH,SAND,MAMO;AACHiC,UAAAA,KAAK,CAACC,KAAN,CACI,OADJ,EAEI,uCAFJ,EAGI,CAEI;AAAEG,YAAAA,IAAI,EAAE,IAAR;AAAcC,YAAAA,OAAO,EAAE;AAAA,qBAAMT,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAN;AAAA;AAAvB,WAFJ,CAHJ;AAQA9B,UAAAA,YAAY,CAAC,KAAD,CAAZ;AACH;AACJ,OA7BL,EA8BKyD,KA9BL,CA8BW,UAAAC,GAAG,EAAI;AACV7B,QAAAA,OAAO,CAACC,GAAR,CAAY4B,GAAZ;AACH,OAhCL;AAmCH;;AACDrE,IAAAA,SAAS,CAAC,YAAM;AAEZW,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACA4C,MAAAA,KAAK,8CAA4C/C,KAAK,CAAC8D,QAAlD,EAA8D;AAC/Dd,QAAAA,MAAM,EAAE,KADuD;AAE/DC,QAAAA,OAAO,EAAE;AACLC,UAAAA,aAAa,cAAYzB,KADpB;AAEL0B,UAAAA,WAAW,EAAE,aAFR;AAGLC,UAAAA,MAAM,EAAE,kBAHH;AAIL,0BAAgB,kBAJX;AAKLC,UAAAA,IAAI,EAAE;AALD;AAFsD,OAA9D,CAAL,CAUKC,IAVL,CAUU,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAVb,EAWKF,IAXL,CAWU,UAAAC,GAAG,EAAI;AACT,YAAIA,GAAJ,EAAS;AACL/B,UAAAA,OAAO,CAAC+B,GAAD,CAAP;;AACA,cAAIQ,MAAI,GAAGR,GAAG,CAACS,MAAJ,CAAW,UAAA7B,IAAI;AAAA,mBAAIA,IAAI,CAAC8B,QAAL,KAAkBjE,KAAK,CAACiE,QAA5B;AAAA,WAAf,CAAX;;AACAhE,UAAAA,QAAQ,CAAC8D,MAAI,CAAC,CAAD,CAAL,CAAR;AACA5D,UAAAA,YAAY,CAAC,KAAD,CAAZ;AAEH,SAND,MAMO;AACHiC,UAAAA,KAAK,CAACC,KAAN,CACI,OADJ,EAEI,uCAFJ,EAGI,CAEI;AAAEG,YAAAA,IAAI,EAAE,IAAR;AAAcC,YAAAA,OAAO,EAAE;AAAA,qBAAMT,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAN;AAAA;AAAvB,WAFJ,CAHJ;AAQA9B,UAAAA,YAAY,CAAC,KAAD,CAAZ;AACH;AACJ,OA7BL,EA8BKyD,KA9BL,CA8BW,UAAAC,GAAG,EAAI;AACV7B,QAAAA,OAAO,CAACC,GAAR,CAAY4B,GAAZ;AACH,OAhCL;AAmCH,KAtCQ,EAsCN,EAtCM,CAAT;AAwCA,QAAIM,WAAW,GAAG5C,QAAQ,CAACyC,MAAT,CAAgB,UAAAE,EAAE;AAAA,aAAIA,EAAE,CAACpD,KAAH,KAAa,KAAjB;AAAA,KAAlB,CAAlB;AACA,QAAIqB,IAAI,GAAGgC,WAAW,CAACH,MAAZ,CAAmB,UAAAE,EAAE;AAAA,aAAIA,EAAE,CAACD,QAAH,KAAgBjE,KAAK,CAACiE,QAA1B;AAAA,KAArB,CAAX;AAGA,WACI9B,IAAI,CAACiC,GAAL,CAAS,UAACjC,IAAD,EAAU;AACf,UAAMkC,MAAM,GAAGlC,IAAI,CAACS,GAApB;AACA,UAAMqB,QAAQ,GAAG9B,IAAI,CAAC8B,QAAtB;;AAEA,UAAMK,8BAA8B,GAAG,SAAjCA,8BAAiC,CAAC7C,KAAD,EAAQ8C,KAAR,EAAeC,IAAf,EAAwB;AAC3DzB,QAAAA,KAAK,CAAC,sCAAD,EAAyC;AAC1CC,UAAAA,MAAM,EAAE,MADkC;AAE1CC,UAAAA,OAAO,EAAE;AACLG,YAAAA,MAAM,EAAE,kBADH;AAEL,+BAAmB,cAFd;AAGL,4BAAgB;AAHX,WAFiC;AAO1CoB,UAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBC,YAAAA,EAAE,EAAElD,KADa;AAEjB8C,YAAAA,KAAK,EAALA,KAFiB;AAGjBC,YAAAA,IAAI,EAAJA;AAHiB,WAAf;AAPoC,SAAzC,CAAL;AAaH,OAdD;;AAeA,eAASI,IAAT,CAAcC,IAAd,EAAoB;AAChB,YAAIA,IAAI,GAAG,CAAX,EAAc;AACV,iBACOA,IADP;AAGH,SAJD,MAIO;AACH,iBACOA,IADP;AAGH;AACJ;;AAED,eAASC,aAAT,CAAuBnD,UAAvB,EAAmCQ,IAAnC,EAAyCrC,QAAzC,EAAmDiE,IAAnD,EAAyDM,MAAzD,EAAiE;AAC7D,YAAMU,YAAY,GAAGjF,QAAQ,CAACuE,MAAM,GAAGJ,QAAV,CAA7B;AACA,YAAMe,MAAM,GAAGD,YAAY,GAAG5C,IAAI,CAAC8C,OAAnC;;AACA,YAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACrB,cAAIpF,QAAQ,CAACuE,MAAD,CAAR,IAAoBc,SAAxB,EAAmC;AAC/B,mBAAO,EAAP;AACH,WAFD,MAEO;AACH,mBAAOrF,QAAQ,CAACuE,MAAD,CAAf;AACH;AAEJ,SAPD;;AAQA,YAAMe,OAAO,GAAGF,UAAU,EAA1B;AACAlD,QAAAA,OAAO,CAACC,GAAR,CAAYR,KAAZ;AACA1B,QAAAA,OAAO,iCACAD,QADA,2BAEFqC,IAAI,CAACS,GAAL,GAAWT,IAAI,CAAC8B,QAFd,EAEyBc,YAFzB,GAAP;AAIA,YAAMM,YAAY,GAAGrF,KAAK,CAACiF,OAAN,GAAgBF,YAArC;;AAEA,YAAI/E,KAAK,CAACiF,OAAN,IAAiBF,YAArB,EAAmC;AAC/B,cAAIA,YAAY,GAAG,CAAnB,EAAsB;AAElBhC,YAAAA,KAAK,mDAAiDsB,MAAjD,EAA2D;AAC5DrB,cAAAA,MAAM,EAAE,KADoD;AAE5DC,cAAAA,OAAO,EAAE;AAELC,gBAAAA,aAAa,cAAYzB,KAFpB;AAGL2B,gBAAAA,MAAM,EAAE,kBAHH;AAIL,gCAAgB,kBAJX;AAKLC,gBAAAA,IAAI,EAAE;AALD,eAFmD;AAS5DmB,cAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjB,gCAAgBK,YADC;AAEjB,2BAAWM,YAFM;AAGjB,4BAAYL,MAHK;AAIjB,2BAAW;AACP,0BAAQ,IAAIM,IAAJ,EADD;AAEP,4BAAU,UAFH;AAGP,4BAAUP,YAHH;AAIP,6BAAWC,MAJJ;AAKP,8BAAYI,OALL;AAMP,mCAAepF,KAAK,CAACsC,SAArB,SAAkCtC,KAAK,CAACuC;AANjC,iBAJM;AAYjB,4BAAY;AACR,0BAAQ,IAAI+C,IAAJ,EADA;AAER,4BAAU,MAFF;AAGR,4BAAUP,YAHF;AAIR,6BAAWM,YAJH;AAKR,8BAAYD,OALJ;AAMR,iCAAajD,IAAI,CAACG,SAAlB,SAA+BH,IAAI,CAACI;AAN5B,iBAZK;AAoBjB,0BAAUvC,KAAK,CAAC4C;AApBC,eAAf;AATsD,aAA3D,CAAL,CAiCKU,IAjCL,CAiCU,UAAAC,GAAG;AAAA,qBAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,aAjCb,EAkCKF,IAlCL,CAkCU,UAAAC,GAAG,EAAI;AACT,kBAAIA,GAAG,CAACE,OAAR,EAAiB;AAAA;;AACb,oBAAM8B,OAAO,GAAMvF,KAAK,CAACsC,SAAZ,SAAyBtC,KAAK,CAACuC,QAA/B,kBAAoDqC,IAAI,CAACG,YAAD,CAAxD,MAAb;AACAT,gBAAAA,8BAA8B,CAACnC,IAAI,CAACqD,SAAN,gBAA+BD,OAA/B,CAA9B;AACAxF,gBAAAA,OAAO,iCAAMD,QAAN,6DAAiBuE,MAAjB,EAA0B,EAA1B,mCAA+BA,MAAM,GAAGJ,QAAxC,EAAmDc,YAAnD,oBAAP,EACIrB,MAAM,EADV;AAEAtB,gBAAAA,KAAK,CAACC,KAAN,CACI,aADJ,gBAEgBuC,IAAI,CAACG,YAAD,CAFpB,aAEyC5C,IAAI,CAACG,SAAL,GAAiB,GAAjB,GAAuBH,IAAI,CAACI,QAFrE,GAGI,CACI;AACIC,kBAAAA,IAAI,EAAE,QADV;AAEIC,kBAAAA,OAAO,EAAE;AAAA,2BAAMT,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAAN;AAAA,mBAFb;AAGIS,kBAAAA,KAAK,EAAE;AAHX,iBADJ,EAMI;AAAEF,kBAAAA,IAAI,EAAE,IAAR;AAAcC,kBAAAA,OAAO,EAAE;AAAA,2BAAMT,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAN;AAAA;AAAvB,iBANJ,CAHJ;AAYH,eAjBD,MAiBO;AACHG,gBAAAA,KAAK,CAACC,KAAN,MACOwB,GADP,EAEI,mCAFJ,EAGI,CAEI;AAAErB,kBAAAA,IAAI,EAAE,IAAR;AAAcC,kBAAAA,OAAO,EAAE;AAAA,2BAAMT,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAN;AAAA;AAAvB,iBAFJ,CAHJ;AAQH;AACJ,aA9DL,EA+DK2B,KA/DL,CA+DW,UAAAC,GAAG,EAAI;AACVzB,cAAAA,KAAK,CAACC,KAAN,CACI,OADJ,EAEI,oBAFJ,EAGI,CACI;AAAEG,gBAAAA,IAAI,EAAE,IAAR;AAAcC,gBAAAA,OAAO,EAAE;AAAA,yBAAMT,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAN;AAAA;AAAvB,eADJ,CAHJ;AAOAN,cAAAA,UAAU,CAAC8D,QAAX,CAAoB,OAApB;AACH,aAxEL;AA0EH,WA5ED,MA4EO;AACH,mBAAO,IAAP;AACH;AACJ,SAhFD,MAiFK;AACDrD,UAAAA,KAAK,CAACC,KAAN,CACI,2BADJ,2DAE2DrC,KAAK,CAACiF,OAFjE,EAGI,CACI;AACIzC,YAAAA,IAAI,EAAE,QADV;AAEIC,YAAAA,OAAO,EAAE;AAAA,qBAAMT,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAAN;AAAA,aAFb;AAGIS,YAAAA,KAAK,EAAE;AAHX,WADJ,EAMI;AAAEF,YAAAA,IAAI,EAAE,IAAR;AAAcC,YAAAA,OAAO,EAAE;AAAA,qBAAMT,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAN;AAAA;AAAvB,WANJ,CAHJ;AAYH;AAEJ;;AACD,eAASyD,SAAT,CAAmBC,IAAnB,EAAyB;AACrB,YAAIA,IAAI,IAAIR,SAAZ,EAAuB;AACnB,iBAAO,CAAP;AACH,SAFD,MAEO;AACH,iBAAQQ,IAAI,GAAG,CAAf;AACH;AAEJ;;AAED,aACI,KAAC,GAAD;AAEI,QAAA,KAAK,EAAE;AAAEpF,UAAAA,KAAK,EAAE,GAAT;AAAcW,UAAAA,UAAU,EAAE;AAA1B,SAFX;AAGI,QAAA,MAAM,EAAE,CAHZ;AAII,QAAA,EAAE,EAAC,GAJP;AAKI,QAAA,IAAI,EAAC,KALT;AAMI,QAAA,OAAO,EAAC,IANZ;AAOI,QAAA,QAAQ,EAAC,QAPb;AAQI,QAAA,WAAW,EAAC,cARhB;AASI,QAAA,WAAW,EAAC,GAThB;AAUI,QAAA,IAAI,EAAE;AACF0E,UAAAA,MAAM,EAAE,CADN;AAEFC,UAAAA,WAAW,EAAE;AAFX,SAVV;AAcI,QAAA,MAAM,EAAE;AACJC,UAAAA,eAAe,EAAE;AADb,SAdZ;AAAA,kBAkBI,MAAC,KAAD;AAAA,qBACI,KAAC,gBAAD;AAAkB,YAAA,cAAc,EAAE,IAAlC;AAAwC,YAAA,WAAW,EAAE;AAAA,qBAAM5D,aAAa,CAACC,IAAD,CAAnB;AAAA,aAArD;AAAA,sBACI,MAAC,MAAD;AAAQ,cAAA,OAAO,EAAC,MAAhB;AAAuB,cAAA,aAAa,EAAC,KAArC;AAA2C,cAAA,UAAU,EAAC,QAAtD;AAA+D,cAAA,CAAC,EAAC,MAAjE;AAAwE,cAAA,KAAK,EAAE,CAA/E;AAAkF,cAAA,cAAc,EAAC,cAAjG;AAAA,yBACI,KAAC,IAAD;AACI,gBAAA,KAAK,EAAC,KADV;AAEI,gBAAA,EAAE,EAAC,GAFP;AAGI,gBAAA,EAAE,EAAC,GAHP;AAII,gBAAA,QAAQ,EAAC,IAJb;AAKI,gBAAA,KAAK,EAAC,UALV;AAMI,gBAAA,UAAU,EAAC,KANf;AAAA,0BAQKA,IAAI,CAACG,SAAL,GAAiB,GAAjB,GAAuBH,IAAI,CAACI;AARjC,gBADJ,EAWI,MAAC,MAAD;AAAQ,gBAAA,cAAc,EAAC,QAAvB;AAAA,2BACI,KAAC,OAAD;AAAwB,kBAAA,KAAK,EAAEmD,SAAS,CAAC,CAAD,CAAxC;AAA6C,kBAAA,KAAK,EAAEA,SAAS,CAAC5F,QAAQ,CAACqC,IAAI,CAACS,GAAL,GAAWT,IAAI,CAAC8B,QAAjB,CAAT,CAA7D;AAAmG,kBAAA,GAAG,EAAE,CAAxG;AAA2G,kBAAA,QAAQ,EAAE,kBAAC8B,CAAD,EAAO;AAExHhG,oBAAAA,OAAO,iCACAD,QADA,2BAEFqC,IAAI,CAACS,GAAL,GAAWT,IAAI,CAAC8B,QAFd,EAEyB8B,CAFzB,GAAP;AAIH;AAND,mBAAc5D,IAAI,CAACS,GAAnB,CADJ,EASI,KAAC,MAAD;AAAQ,kBAAA,EAAE,EAAC,GAAX;AACI,kBAAA,OAAO,EAAE,mBAAM;AACVkC,oBAAAA,aAAa,CAACnD,UAAD,EAAaQ,IAAb,EAAmBrC,QAAnB,EAA6BiE,IAA7B,EAAmCM,MAAnC,CAAd;AAGH,mBALL;AAAA;AAAA,kBATJ;AAAA,gBAXJ;AAAA;AADJ,YADJ,EA+BI,KAAC,KAAD;AAAO,YAAA,EAAE,EAAElC,IAAI,CAACS,GAAhB;AAAqB,YAAA,KAAK,EAAE9C,QAAQ,CAACqC,IAAI,CAACS,GAAN,CAApC;AAAgD,YAAA,WAAW,EAAC,UAA5D;AAAuE,YAAA,YAAY,EAAE,sBAACJ,IAAD,EAAU;AAC3FzC,cAAAA,OAAO,iCACAD,QADA,2BAEFqC,IAAI,CAACS,GAFH,EAESJ,IAFT,GAAP;AAIH;AALD,YA/BJ;AAAA;AAlBJ,SACSL,IAAI,CAACS,GADd,CADJ;AA4DH,KAxND,CADJ;AA2NH;;AAED,SACI,MAAC,kBAAD;AAAA,eACI,KAAC,MAAD,KADJ,EAEI,MAAC,eAAD;AAAiB,MAAA,UAAU,EACtB;AAAEoD,QAAAA,OAAO,EAAE;AAAX,OADL;AACuB,MAAA,KAAK,EAAEC,MAAM,CAACC,MADrC;AAC6C,MAAA,MAAM,EAAE7F,OAAO,kCAD5D;AACgG,MAAA,UAAU,EAAC,OAD3G;AAAA,iBAEKD,OAAO,EAFZ,EAGI,MAAC,UAAD;AAAA,mBACKkB,QAAQ,CAACnC,MAAD,CADb,EAEK2B,KAAK,EAFV;AAAA,QAHJ;AAAA,MAFJ,EAUI,KAAC,WAAD,KAVJ;AAAA,IADJ;AAcH;;AAED,SAASqF,MAAT,GAAkB;AACd,MAAMxE,UAAU,GAAGtC,aAAa,EAAhC;AACA,SACI;AAAA,eACI,KAAC,GAAD;AAAK,MAAA,WAAW,MAAhB;AAAiB,MAAA,eAAe,EAAC;AAAjC,MADJ,EAEI,MAAC,MAAD;AAAQ,MAAA,WAAW,EAAC,UAApB;AACI,MAAA,WAAW,EAAC,GADhB;AACoB,MAAA,EAAE,EAAC,WADvB;AACmC,MAAA,EAAE,EAAC,GADtC;AAC0C,MAAA,EAAE,EAAC,GAD7C;AACiD,MAAA,UAAU,EAAC,QAD5D;AAAA,iBAEI,KAAC,MAAD;AAAQ,QAAA,KAAK,EAAC,GAAd;AAAkB,QAAA,UAAU,EAAC,QAA7B;AAAA,kBACI,KAAC,QAAD;AAAU,UAAA,IAAI,EAAC,uBAAf;AAAuC,UAAA,IAAI,EAAE,EAA7C;AAAiD,UAAA,KAAK,EAAC,OAAvD;AAA+D,UAAA,OAAO,EAAE,mBAAM;AAAEsC,YAAAA,UAAU,CAAC8D,QAAX,CAAoB,MAApB;AAA8B;AAA9G;AADJ,QAFJ,EAOI,KAAC,MAAD;AAAQ,QAAA,EAAE,EAAC,WAAX;AAAuB,QAAA,EAAE,EAAC,GAA1B;AAAA,kBACI,KAAC,MAAD;AAAA,oBAAQ,KAAC,OAAD;AAAS,YAAA,IAAI,EAAC,IAAd;AAAmB,YAAA,KAAK,EAAC,OAAzB;AAAA;AAAA;AAAR;AADJ,QAPJ;AAAA,MAFJ;AAAA,IADJ;AAgBH;;AAED,SAASW,WAAT,GAAuB;AACnB,qBAA4B7G,UAAU,CAACE,WAAD,CAAtC;AAAA,MAAQO,KAAR,gBAAQA,KAAR;AAAA,MAAeC,QAAf,gBAAeA,QAAf;;AACA,SACI;AAAA,cACI,KAAC,MAAD;AAAQ,MAAA,WAAW,EAAC,UAApB;AAA+B,MAAA,WAAW,EAAC,GAA3C;AAA+C,MAAA,KAAK,EAAC,GAArD;AAAyD,MAAA,EAAE,EAAC,WAA5D;AAAwE,MAAA,EAAE,EAAC,GAA3E;AAA+E,MAAA,EAAE,EAAC,GAAlF;AAAsF,MAAA,cAAc,EAAC,eAArG;AAAqH,MAAA,UAAU,EAAC,QAAhI;AAAA,gBACI,KAAC,MAAD;AAAA,kBACI,MAAC,MAAD;AAAA,qBACI,KAAC,KAAD;AAAO,YAAA,KAAK,EAAEgG,MAAM,CAACI,WAArB;AAAkC,YAAA,MAAM,EAAEhG,OAAO;AAAjD,YADJ,EAEI,KAAC,IAAD;AAAM,YAAA,KAAK,EAAE4F,MAAM,CAACK,KAApB;AAAA,sBAA4BtG,KAAK,CAACiF;AAAlC,YAFJ;AAAA;AADJ;AADJ;AADJ,IADJ;AAYH;;AAGD,IAAMgB,MAAM,GAAGM,UAAU,CAACC,MAAX,CAAkB;AAC7BC,EAAAA,SAAS,EAAE;AACP1F,IAAAA,IAAI,EAAE,CADC;AAEPL,IAAAA,UAAU,EAAE,QAFL;AAGPD,IAAAA,cAAc,EAAE;AAHT,GADkB;AAM7BiG,EAAAA,IAAI,EAAE;AACFrF,IAAAA,KAAK,EAAE,OADL;AAEFF,IAAAA,QAAQ,EAAE,EAFR;AAGFC,IAAAA,UAAU,EAAE;AAHV,GANuB;AAa7BuF,EAAAA,GAAG,EAAE;AACDpG,IAAAA,KAAK,EAAE,EADN;AAEDC,IAAAA,MAAM,EAAE,EAFP;AAGDF,IAAAA,SAAS,EAAE,CAAC,EAHX;AAIDY,IAAAA,UAAU,EAAE,CAAC;AAJZ,GAbwB;AAmB7BoF,EAAAA,KAAK,EAAE;AACHjF,IAAAA,KAAK,EAAE,OADJ;AAEHF,IAAAA,QAAQ,EAAE,EAFP;AAGHC,IAAAA,UAAU,EAAE,KAHT;AAIHH,IAAAA,UAAU,EAAE,EAJT;AAKHX,IAAAA,SAAS,EAAE,CALR;AAMH0F,IAAAA,OAAO,EAAE,GANN;AAOHY,IAAAA,UAAU,EAAE;AAPT,GAnBsB;AA4B7BhC,EAAAA,IAAI,EAAE;AACFrE,IAAAA,KAAK,EAAE,GADL;AAEFM,IAAAA,UAAU,EAAE,SAFV;AAGFL,IAAAA,MAAM,EAAE;AAHN,GA5BuB;AAiC7BqG,EAAAA,OAAO,EAAE;AACLC,IAAAA,IAAI,EAAE;AADD,GAjCoB;AAoC7BD,EAAAA,OAAO,EAAE;AACLtG,IAAAA,KAAK,EAAE;AADF,GApCoB;AAuC7B8F,EAAAA,WAAW,EAAE;AACT1F,IAAAA,MAAM,EAAE,CADC;AAETE,IAAAA,UAAU,EAAE,SAFH;AAGTN,IAAAA,KAAK,EAAE,GAHE;AAITD,IAAAA,SAAS,EAAE,CAAC,EAJH;AAKTyG,IAAAA,YAAY,EAAE,CAAC;AALN,GAvCgB;AA+C7BC,EAAAA,KAAK,EAAE;AACHjG,IAAAA,IAAI,EAAE,CADH;AAEHN,IAAAA,cAAc,EAAE,QAFb;AAGHC,IAAAA,UAAU,EAAE,QAHT;AAIHH,IAAAA,KAAK,EAAE,MAJJ;AAKHC,IAAAA,MAAM,EAAE,MALL;AAMHK,IAAAA,UAAU,EAAE;AANT,GA/CsB;AAuD7BqF,EAAAA,MAAM,EAAE;AACJnF,IAAAA,IAAI,EAAE,CADF;AAEJN,IAAAA,cAAc,EAAE,QAFZ;AAGJC,IAAAA,UAAU,EAAE,QAHR;AAIJH,IAAAA,KAAK,EAAE,MAJH;AAKJC,IAAAA,MAAM,EAAE,MALJ;AAMJuG,IAAAA,YAAY,EAAE,EANV;AAOJA,IAAAA,YAAY,EAAE;AAPV,GAvDqB;AAgE7BxC,EAAAA,KAAK,EAAE;AACHhE,IAAAA,KAAK,EAAE,GADJ;AAEHM,IAAAA,UAAU,EAAE,OAFT;AAGHP,IAAAA,SAAS,EAAE,CAAC,GAHT;AAIHyG,IAAAA,YAAY,EAAE,CAAC,GAJZ;AAKHE,IAAAA,MAAM,EAAE,CAAC;AALN,GAhEsB;AAuE7BC,EAAAA,MAAM,EAAE;AACJ5G,IAAAA,SAAS,EAAE,KADP;AAEJY,IAAAA,UAAU,EAAE,KAFR;AAGJT,IAAAA,cAAc,EAAE,YAHZ;AAIJC,IAAAA,UAAU,EAAE,YAJR;AAKJoF,IAAAA,eAAe,EAAE;AALb,GAvEqB;AA8E7BqB,EAAAA,UAAU,EAAE;AACRC,IAAAA,QAAQ,EAAE,UADF;AAERC,IAAAA,MAAM,EAAE,CAFA;AAGRC,IAAAA,IAAI,EAAE,CAHE;AAIRC,IAAAA,KAAK,EAAE,CAJC;AAKRC,IAAAA,mBAAmB,EAAE,EALb;AAMRC,IAAAA,oBAAoB,EAAE;AANd,GA9EiB;AAsF7BC,EAAAA,MAAM,EAAE;AACJ3G,IAAAA,IAAI,EAAE,CADF;AAEJN,IAAAA,cAAc,EAAE,QAFZ;AAGJC,IAAAA,UAAU,EAAE;AAHR,GAtFqB;AA2F7BiH,EAAAA,KAAK,EAAE;AACHpH,IAAAA,KAAK,EAAE,EADJ;AAEHC,IAAAA,MAAM,EAAE;AAFL;AA3FsB,CAAlB,CAAf","sourcesContent":["import { StyleSheet, ImageBackground, Image, View, Alert, TouchableOpacity } from \"react-native\";\r\nimport { NativeBaseProvider, Box, Container, Heading, Divider, AspectRatio, Stack, HStack, Text, Icon, VStack, Center, StatusBar, Button, Input } from 'native-base';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport { FlatList, ScrollView } from \"react-native-gesture-handler\";\r\nimport prizes from './sample';\r\nimport Counter from \"react-native-counters\";\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { Component, useContext, useEffect } from \"react\";\r\nimport { UserContext } from \"./UserContext\";\r\nimport React from \"react\";\r\nimport * as SecureStore from 'expo-secure-store';\r\n\r\nexport default function SendScreen() {\r\n    const [formData, setData] = React.useState({});\r\n    const { value, setValue } = useContext(UserContext);\r\n    const [isLoading, setIsLoading] = React.useState(true);\r\n\r\n\r\n    function Spinner() {\r\n        if (isLoading) {\r\n            return (\r\n                <Image alt=\"spinner\" source={require('../assets/images/genericspinner.gif')}\r\n                    style={{ marginTop: \"-34%\", width: '32%', height: '20%', justifyContent: \"center\", alignItems: \"center\", zIndex: 20000000, top: \"49%\", resizeMode: \"contain\" }} />\r\n            )\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    function admin() {\r\n        if (value.admin) {\r\n            return (\r\n                <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'center', alignItems: 'center', paddingTop: 10 }}>\r\n                    <Ionicons name=\"md-trash-sharp\" size={16} color=\"gray\" />\r\n                    <Text style={{ marginLeft: 5, fontSize: 16, fontWeight: 'bold', color: 'gray' }}>Long Press Any User to Delete</Text>\r\n                </View>\r\n            )\r\n        } else {\r\n            return (\r\n                null\r\n            )\r\n        }\r\n    }\r\n\r\n    function CoinShow() {\r\n        const { value, setValue } = useContext(UserContext);\r\n        const [userData, setUser] = React.useState([]);\r\n        const [formData, setData] = React.useState({});\r\n        const [token, setToken] = React.useState('');\r\n        const navigation = useNavigation();\r\n\r\n        async function getValueFor(key) {\r\n            let result = await SecureStore.getItemAsync(key);\r\n            if (result) {\r\n                setToken(result);\r\n            } else {\r\n                console.log('No values stored under that key.');\r\n            }\r\n        }\r\n        getValueFor('token');\r\n\r\n\r\n        //delete user prompt\r\n        function askDeleteUser(user) {\r\n            if (value.admin) {\r\n                Alert.alert(\r\n                    'Delete User',\r\n                    `Are you sure you want to delete ${user.firstname} ${user.lastname}? This action cannot be undone.`,\r\n\r\n                    [\r\n                        {\r\n                            text: 'Cancel',\r\n                            onPress: () => console.log('Cancel Pressed'),\r\n                            style: 'cancel',\r\n                        },\r\n                        {\r\n                            text: 'OK', onPress: () => {\r\n                                deleteUser(user._id);\r\n                            }\r\n                        },\r\n                    ],\r\n                    { cancelable: false },\r\n                );\r\n\r\n            }\r\n        }\r\n        function deleteUser(id) {\r\n            fetch(`https://crewcoin.herokuapp.com/crewuser/${id}`, {\r\n                method: \"DELETE\",\r\n                headers: {\r\n                    authorization: `bearer ${token}`,\r\n                    credentials: \"same-origin\",\r\n                    Accept: \"application/json\",\r\n                    \"Content-Type\": \"application/json\",\r\n                    mode: \"cors\"\r\n                }\r\n            })\r\n\r\n                .then(res => res.json())\r\n                .then(res => {\r\n                    if (res.success) {\r\n                        reload();\r\n                        Alert.alert(\r\n                            'Success',\r\n                            `${res.status}`,\r\n                            [\r\n                                {\r\n                                    text: 'OK',\r\n                                    onPress: () => console.log('OK Pressed'),\r\n                                    style: 'cancel',\r\n                                },\r\n                            ],\r\n                            { cancelable: false },\r\n                        );\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    Alert.alert(\r\n                        'Error',\r\n                        'Something went wrong!',\r\n                        [\r\n                            {\r\n                                text: 'OK',\r\n                                onPress: () => console.log('OK Pressed'),\r\n                                style: 'cancel',\r\n                            },\r\n                        ],\r\n                        { cancelable: false },\r\n                    );\r\n                }\r\n                )\r\n            fetch(`https://crewcoin.herokuapp.com/crewuser/${value.portalId}`, {\r\n                method: \"GET\",\r\n                headers: {\r\n                    authorization: `bearer ${token}`,\r\n                    credentials: \"same-origin\",\r\n                    Accept: \"application/json\",\r\n                    \"Content-Type\": \"application/json\",\r\n                    mode: \"cors\"\r\n                },\r\n            })\r\n                .then(res => res.json())\r\n                .then(res => {\r\n                    if (res) {\r\n                        setUser(res);\r\n                        let self = res.filter(user => user.username === value.username);\r\n                        setValue(self[0]);\r\n                    } else {\r\n                        Alert.alert(\r\n                            \"Error\",\r\n                            \"Please check your internet connection\",\r\n                            [\r\n\r\n                                { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n                            ]\r\n                        )\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                }\r\n                );\r\n            let user = userData.filter(el => el.username !== value.username);\r\n        }\r\n\r\n\r\n        // function to set new user balance\r\n        function reload() {\r\n            fetch(`https://crewcoin.herokuapp.com/crewuser/${value.portalId}`, {\r\n                method: \"GET\",\r\n                headers: {\r\n                    authorization: `bearer ${token}`,\r\n                    credentials: \"same-origin\",\r\n                    Accept: \"application/json\",\r\n                    \"Content-Type\": \"application/json\",\r\n                    mode: \"cors\"\r\n                },\r\n            })\r\n                .then(res => res.json())\r\n                .then(res => {\r\n                    if (res) {\r\n                        setUser(res);\r\n                        let self = res.filter(user => user.username === value.username);\r\n                        setValue(self[0]);\r\n                        setIsLoading(false);\r\n\r\n                    } else {\r\n                        Alert.alert(\r\n                            \"Error\",\r\n                            \"Please check your internet connection\",\r\n                            [\r\n\r\n                                { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n                            ]\r\n                        )\r\n                        setIsLoading(false);\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                }\r\n                );\r\n\r\n        }\r\n        useEffect(() => {\r\n            //get user data\r\n            setIsLoading(true);\r\n            fetch(`https://crewcoin.herokuapp.com/crewuser/${value.portalId}`, {\r\n                method: \"GET\",\r\n                headers: {\r\n                    authorization: `bearer ${token}`,\r\n                    credentials: \"same-origin\",\r\n                    Accept: \"application/json\",\r\n                    \"Content-Type\": \"application/json\",\r\n                    mode: \"cors\"\r\n                },\r\n            })\r\n                .then(res => res.json())\r\n                .then(res => {\r\n                    if (res) {\r\n                        setUser(res);\r\n                        let self = res.filter(user => user.username === value.username);\r\n                        setValue(self[0]);\r\n                        setIsLoading(false);\r\n\r\n                    } else {\r\n                        Alert.alert(\r\n                            \"Error\",\r\n                            \"Please check your internet connection\",\r\n                            [\r\n\r\n                                { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n                            ]\r\n                        )\r\n                        setIsLoading(false);\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                }\r\n                );\r\n\r\n        }, []);\r\n        //set users for send screen minus current user\r\n        let removeAdmin = userData.filter(el => el.admin === false);\r\n        let user = removeAdmin.filter(el => el.username !== value.username);\r\n\r\n        //map users list to send screen\r\n        return (\r\n            user.map((user) => {\r\n                const userId = user._id;\r\n                const username = user.username;\r\n                //send push notification\r\n                const triggerPushNotificationHandler = (token, title, body) => {\r\n                    fetch(\"https://exp.host/--/api/v2/push/send\", {\r\n                        method: \"POST\",\r\n                        headers: {\r\n                            Accept: \"application/json\",\r\n                            \"Accept-Encoding\": \"gzip,deflate\",\r\n                            \"Content-Type\": \"application/json\",\r\n                        },\r\n                        body: JSON.stringify({\r\n                            to: token,\r\n                            title,\r\n                            body,\r\n                        }),\r\n                    })\r\n                }\r\n                function coin(cost) {\r\n                    if (cost > 1) {\r\n                        return (\r\n                            `${cost} Crew Coins`\r\n                        )\r\n                    } else {\r\n                        return (\r\n                            `${cost} Crew Coin`\r\n                        )\r\n                    }\r\n                }\r\n\r\n                function handleReceive(navigation, user, formData, self, userId) {\r\n                    const coinincrease = formData[userId + username];\r\n                    const amount = coinincrease + user.balance;\r\n                    const newComment = () => {\r\n                        if (formData[userId] == undefined) {\r\n                            return \"\";\r\n                        } else {\r\n                            return formData[userId];\r\n                        }\r\n\r\n                    }\r\n                    const comment = newComment();\r\n                    console.log(token);\r\n                    setData({\r\n                        ...formData,\r\n                        [user._id + user.username]: coinincrease\r\n                    })\r\n                    const secondAmount = value.balance - coinincrease;\r\n                    //need to fix this... update user balance\r\n                    if (value.balance >= coinincrease) {\r\n                        if (coinincrease > 0) {\r\n\r\n                            fetch(`https://crewcoin.herokuapp.com/crewuser/send/${userId}`, {\r\n                                method: \"PUT\",\r\n                                headers: {\r\n                                    //bearer token\r\n                                    authorization: `bearer ${token}`,\r\n                                    Accept: \"application/json\",\r\n                                    \"Content-Type\": \"application/json\",\r\n                                    mode: \"cors\"\r\n                                },\r\n                                body: JSON.stringify({\r\n                                    \"coinincrease\": coinincrease,\r\n                                    \"balance\": secondAmount,\r\n                                    \"balance2\": amount,\r\n                                    \"history\": {\r\n                                        \"date\": new Date(),\r\n                                        \"action\": \"Received\",\r\n                                        \"amount\": coinincrease,\r\n                                        \"balance\": amount,\r\n                                        \"comments\": comment,\r\n                                        \"who\": `from ${value.firstname} ${value.lastname}`\r\n                                    },\r\n                                    \"history2\": {\r\n                                        \"date\": new Date(),\r\n                                        \"action\": \"Sent\",\r\n                                        \"amount\": coinincrease,\r\n                                        \"balance\": secondAmount,\r\n                                        \"comments\": comment,\r\n                                        \"who\": `to ${user.firstname} ${user.lastname}`\r\n                                    },\r\n                                    \"userId\": value._id,\r\n                                }),\r\n                            })\r\n\r\n                                .then(res => res.json())\r\n                                .then(res => {\r\n                                    if (res.success) {\r\n                                        const message = `${value.firstname} ${value.lastname} sent you ${coin(coinincrease)}!`;\r\n                                        triggerPushNotificationHandler(user.pushToken, `Cha-Ching!`, message);\r\n                                        setData({ ...formData, [userId]: \"\", [userId + username]: coinincrease }),\r\n                                            reload()\r\n                                        Alert.alert(\r\n                                            \"Coins Sent!\",\r\n                                            `You sent ${coin(coinincrease)} to ${user.firstname + \" \" + user.lastname}`,\r\n                                            [\r\n                                                {\r\n                                                    text: \"Cancel\",\r\n                                                    onPress: () => console.log(\"Cancel Pressed\"),\r\n                                                    style: \"cancel\"\r\n                                                },\r\n                                                { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n                                            ]\r\n                                        );\r\n                                    } else {\r\n                                        Alert.alert(\r\n                                            `${err}`,\r\n                                            \"Please check internet connection!\",\r\n                                            [\r\n\r\n                                                { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n                                            ]\r\n                                        )\r\n                                    }\r\n                                })\r\n                                .catch(err => {\r\n                                    Alert.alert(\r\n                                        \"Error\",\r\n                                        \"Please login again\",\r\n                                        [\r\n                                            { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n                                        ]\r\n                                    )\r\n                                    navigation.navigate(\"Login\");\r\n                                }\r\n                                );\r\n                        } else {\r\n                            return null\r\n                        }\r\n                    }\r\n                    else {\r\n                        Alert.alert(\r\n                            \"You need more crew coins!\",\r\n                            `You do not have enough crew coins! Current balance: ${value.balance}`,\r\n                            [\r\n                                {\r\n                                    text: \"Cancel\",\r\n                                    onPress: () => console.log(\"Cancel Pressed\"),\r\n                                    style: \"cancel\"\r\n                                },\r\n                                { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n                            ]\r\n                        );\r\n                    }\r\n\r\n                }\r\n                function startFunc(data) {\r\n                    if (data == undefined) {\r\n                        return 0;\r\n                    } else {\r\n                        return (data + 0)\r\n                    }\r\n                    \r\n                }\r\n\r\n                return (\r\n                    <Box\r\n                        key={user._id}\r\n                        style={{ width: 500, marginLeft: 0 }}\r\n                        shadow={9}\r\n                        mt=\"3\"\r\n                        maxW=\"380\"\r\n                        rounded=\"lg\"\r\n                        overflow=\"hidden\"\r\n                        borderColor=\"coolGray.200\"\r\n                        borderWidth=\"1\"\r\n                        _web={{\r\n                            shadow: 2,\r\n                            borderWidth: 0,\r\n                        }}\r\n                        _light={{\r\n                            backgroundColor: \"gray.50\",\r\n                        }}\r\n                    >\r\n                        <Stack>\r\n                            <TouchableOpacity delayLongPress={2000} onLongPress={() => askDeleteUser(user)}>\r\n                                <HStack display=\"flex\" flexDirection=\"row\" alignItems=\"center\" w=\"100%\" space={3} justifyContent=\"space-evenly\">\r\n                                    <Text\r\n                                        width=\"40%\"\r\n                                        py=\"3\"\r\n                                        px=\"2\"\r\n                                        fontSize=\"lg\"\r\n                                        color=\"gray.600\"\r\n                                        fontWeight=\"600\"\r\n                                    >\r\n                                        {user.firstname + \" \" + user.lastname}\r\n                                    </Text>\r\n                                    <HStack justifyContent=\"center\">\r\n                                        <Counter key={user._id} start={startFunc(0)} count={startFunc(formData[user._id + user.username])} min={0} onChange={(e) => {\r\n\r\n                                            setData({\r\n                                                ...formData,\r\n                                                [user._id + user.username]: e\r\n                                            })\r\n                                        }} />\r\n\r\n                                        <Button ml=\"3\"\r\n                                            onPress={() => {\r\n                                                (handleReceive(navigation, user, formData, self, userId));\r\n\r\n\r\n                                            }}>Send</Button>\r\n                                    </HStack>\r\n                                </HStack>\r\n                            </TouchableOpacity>\r\n                            <Input id={user._id} value={formData[user._id]} placeholder=\"Comments\" onChangeText={(text) => {\r\n                                setData({\r\n                                    ...formData,\r\n                                    [user._id]: text\r\n                                })\r\n                            }} />\r\n                        </Stack>\r\n                    </Box>\r\n\r\n                )\r\n            })\r\n        )\r\n    }\r\n\r\n    return (\r\n        <NativeBaseProvider>\r\n            <AppBar />\r\n            <ImageBackground imageStyle=\r\n                {{ opacity: 0.2 }} style={styles.image2} source={require('../assets/images/splashbg2.png')} resizeMode=\"cover\" >\r\n                {Spinner()}\r\n                <ScrollView>\r\n                    {CoinShow(prizes)}\r\n                    {admin()}\r\n                </ScrollView>\r\n            </ImageBackground>\r\n            <CardBalance />\r\n        </NativeBaseProvider>\r\n    );\r\n}\r\n\r\nfunction AppBar() {\r\n    const navigation = useNavigation();\r\n    return (\r\n        <>\r\n            <Box safeAreaTop backgroundColor=\"#f2f2f2\" />\r\n            <HStack borderColor=\"gray.300\"\r\n                borderWidth=\"1\" bg='amber.300' py=\"2\" px=\"1\" alignItems='center'>\r\n                <HStack space=\"4\" alignItems='center'>\r\n                    <Ionicons name=\"md-chevron-back-sharp\" size={24} color=\"black\" onPress={() => { navigation.navigate('Root'); }} />\r\n                </HStack>\r\n\r\n\r\n                <HStack bg='amber.300' px=\"1\">\r\n                    <Center><Heading size=\"lg\" color=\"black\">Send Coins</Heading></Center>\r\n                </HStack>\r\n            </HStack>\r\n        </>\r\n    )\r\n}\r\n\r\nfunction CardBalance() {\r\n    const { value, setValue } = useContext(UserContext);\r\n    return (\r\n        <>\r\n            <VStack borderColor=\"gray.300\" borderWidth=\"1\" space=\"4\" bg='amber.300' px=\"2\" mb=\"2\" justifyContent='space-between' alignItems='center'>\r\n                <Center>\r\n                    <HStack >\r\n                        <Image style={styles.coinbalance} source={require('../assets/images/coinbalance.png')} />\r\n                        <Text style={styles.icon2}>{value.balance}</Text>\r\n                    </HStack>\r\n                </Center>\r\n            </VStack>\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n    },\r\n    icon: {\r\n        color: 'black',\r\n        fontSize: 16,\r\n        fontWeight: 'bold',\r\n\r\n\r\n    },\r\n    gif: {\r\n        width: 80,\r\n        height: 80,\r\n        marginTop: -30,\r\n        marginLeft: -30,\r\n    },\r\n    icon2: {\r\n        color: 'black',\r\n        fontSize: 42,\r\n        fontWeight: '700',\r\n        paddingTop: 23,\r\n        marginTop: 6,\r\n        opacity: 0.9,\r\n        fontFamily: 'System',\r\n    },\r\n    coin: {\r\n        width: 200,\r\n        resizeMode: 'contain',\r\n        height: 50,\r\n    },\r\n    coingif: {\r\n        size: '100%',\r\n    },\r\n    coingif: {\r\n        width: 10,\r\n    },\r\n    coinbalance: {\r\n        zIndex: 2,\r\n        resizeMode: 'contain',\r\n        width: 210,\r\n        marginTop: -90,\r\n        marginBottom: -110,\r\n    },\r\n\r\n    image: {\r\n        flex: 1,\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        width: '100%',\r\n        height: '100%',\r\n        resizeMode: 'cover',\r\n    },\r\n    image2: {\r\n        flex: 1,\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        width: '100%',\r\n        height: '100%',\r\n        marginBottom: 20,\r\n        marginBottom: 5,\r\n    },\r\n    title: {\r\n        width: 400,\r\n        resizeMode: 'cover',\r\n        marginTop: -100,\r\n        marginBottom: -100,\r\n        margin: -100,\r\n    },\r\n    header: {\r\n        marginTop: '15%',\r\n        marginLeft: '18%',\r\n        justifyContent: 'flex-start',\r\n        alignItems: 'flex-start',\r\n        backgroundColor: '#fff',\r\n    },\r\n    BalanceBar: {\r\n        position: 'absolute',\r\n        bottom: 0,\r\n        left: 0,\r\n        right: 0,\r\n        borderTopLeftRadius: 60,\r\n        borderTopRightRadius: 60,\r\n    },\r\n    center: {\r\n        flex: 1,\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n    },\r\n    coin2: {\r\n        width: 80,\r\n        height: 50,\r\n    },\r\n});"]},"metadata":{},"sourceType":"module"}