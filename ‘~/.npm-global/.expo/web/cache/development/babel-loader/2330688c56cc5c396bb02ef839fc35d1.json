{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport { NativeBaseProvider, Box, Input, Heading, Divider, Stack, HStack, Text, VStack, Center, Button } from 'native-base';\nimport { ScrollView } from \"react-native-gesture-handler\";\nimport prizes from \"./sample\";\nimport { useContext, useEffect, useMemo } from \"react\";\nimport { useState } from \"react\";\nimport { UserContext } from \"./UserContext\";\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Permissions from 'expo-permissions';\nimport * as ImageManipulator from 'expo-image-manipulator';\nimport * as MediaLibrary from 'expo-media-library';\nimport firebaseConfig from \"../firebaseConfig.tsx\";\nimport { initializeApp } from \"firebase/app\";\nimport { useIsFocused } from '@react-navigation/native';\nimport { getStorage, ref, uploadBytes, getDownloadURL, deleteObject } from \"firebase/storage\";\nimport moment from \"moment\";\nimport * as SecureStore from 'expo-secure-store';\nimport { useNavigation } from '@react-navigation/native';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\ninitializeApp(firebaseConfig);\nexport default function TabThreeScreen() {\n  var _useContext = useContext(UserContext),\n      value = _useContext.value,\n      setValue = _useContext.setValue;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      prizesData = _useState2[0],\n      setPrizes = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoading = _useState4[0],\n      setIsLoading = _useState4[1];\n\n  var isFocused = useIsFocused();\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      userData = _useState6[0],\n      setUser = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      adminPushToken = _useState8[0],\n      setAdmin = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      token = _useState10[0],\n      setToken = _useState10[1];\n\n  var navigation = useNavigation();\n\n  function getValueFor(key) {\n    var result;\n    return _regeneratorRuntime.async(function getValueFor$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(SecureStore.getItemAsync(key));\n\n          case 2:\n            result = _context.sent;\n\n            if (result) {\n              setToken(result);\n            } else {\n              console.log('No values stored under that key.');\n            }\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  getValueFor('token');\n  console.log(token);\n\n  var triggerPushNotificationHandler = function triggerPushNotificationHandler(token, title, body) {\n    fetch(\"https://exp.host/--/api/v2/push/send\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Accept-Encoding\": \"gzip,deflate\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        to: token,\n        title: title,\n        body: body\n      })\n    });\n  };\n\n  useEffect(function () {\n    setIsLoading(true);\n    Permissions.getAsync(Permissions.NOTIFICATIONS).then(function (statusObj) {\n      if (statusObj.status !== \"granted\") {\n        return Permissions.askAsync(Permissions.NOTIFICATIONS);\n      }\n\n      return statusObj;\n    }).then(function (statusObj) {\n      if (statusObj.status !== \"granted\") {\n        throw new Error(\"Permission not granted\");\n      }\n    }).catch(function (err) {\n      return null;\n    });\n    fetch(\"https://crewcoin.herokuapp.com/crewuser/\" + value.portalId, {\n      method: \"GET\",\n      headers: {\n        authorization: \"bearer \" + token,\n        credentials: \"same-origin\",\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        mode: \"cors\"\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res) {\n      if (res) {\n        setUser(res);\n        var admin = res.filter(function (user) {\n          return user.admin === true;\n        });\n        var _adminPushToken = admin[0].pushToken;\n        setAdmin(_adminPushToken);\n        setIsLoading(false);\n      } else {\n        Alert.alert(\"Error\", \"Please check your internet connection\", [{\n          text: \"OK\",\n          onPress: function onPress() {\n            return console.log(\"OK Pressed\");\n          }\n        }]);\n        setIsLoading(false);\n      }\n    }).catch(function (err) {\n      Alert.alert(\"Error\", \"Please login again\", [{\n        text: \"OK\",\n        onPress: function onPress() {\n          return console.log(\"OK Pressed\");\n        }\n      }]);\n      navigation.navigate(\"Login\");\n    });\n\n    if (value.newStoreItem) {\n      fetch(\"https://crewcoin.herokuapp.com/crewuser/alert/\" + value._id, {\n        method: \"PUT\",\n        headers: {\n          authorization: \"bearer \" + token,\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          mode: \"cors\"\n        },\n        body: JSON.stringify({\n          \"newStoreItem\": false,\n          \"newTransaction\": value.newTransaction,\n          \"newAnnouncement\": value.newAnnouncement\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        if (res.success) {\n          setValue(res.crewuser);\n        } else {\n          Alert.alert(\"\" + err, \"Please check internet connection!\", [{\n            text: \"OK\",\n            onPress: function onPress() {\n              return console.log(\"OK Pressed\");\n            }\n          }]);\n        }\n      }).catch(function (err) {\n        Alert.alert(\"Error\", \"Please login again\", [{\n          text: \"OK\",\n          onPress: function onPress() {\n            return console.log(\"OK Pressed\");\n          }\n        }]);\n        navigation.navigate(\"Login\");\n      });\n    }\n  }, []);\n\n  function Spinner() {\n    if (isLoading) {\n      return _jsx(Image, {\n        alt: \"spinner\",\n        source: require(\"../assets/images/genericspinner.gif\"),\n        style: {\n          marginTop: \"-28%\",\n          width: '30%',\n          height: '20%',\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          zIndex: 20000000,\n          top: \"48%\",\n          resizeMode: \"contain\"\n        }\n      });\n    } else {\n      return null;\n    }\n  }\n\n  function Example() {\n    var _useState11 = useState({}),\n        _useState12 = _slicedToArray(_useState11, 2),\n        postData = _useState12[0],\n        setPost = _useState12[1];\n\n    var imageUrl = postData.imageUrl;\n\n    function handlePost(setPrizes) {\n      var removeAdmin = userData.filter(function (el) {\n        return el.admin === false;\n      });\n      var user = removeAdmin.filter(function (el) {\n        return el.username !== value.username && el.pushToken.length > 0;\n      });\n      var usersPushtoken = user.map(function (el) {\n        return el.pushToken;\n      });\n\n      function coin(cost) {\n        if (cost > 1) {\n          return cost + \" Crew Coins\";\n        } else {\n          return cost + \" Crew Coin\";\n        }\n      }\n\n      if (!postData.title || !postData.description || !postData.imageUrl || !postData.cost || Number.isInteger(parseInt(postData.cost)) === false) {\n        Alert.alert(\"Please fill in all fields and add photo! Cost must be a number!\");\n      } else {\n        setIsLoading(true);\n        var imageName = value.portalId + \"_prize_\" + moment(new Date()).format(\"MMDDYYYYhmma\");\n        var storage = getStorage();\n\n        var uploadImage = function uploadImage() {\n          var img, response, blob;\n          return _regeneratorRuntime.async(function uploadImage$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  img = postData.imageUrl;\n                  _context2.next = 3;\n                  return _regeneratorRuntime.awrap(fetch(postData.imageUrl));\n\n                case 3:\n                  response = _context2.sent;\n                  _context2.next = 6;\n                  return _regeneratorRuntime.awrap(response.blob());\n\n                case 6:\n                  blob = _context2.sent;\n                  uploadBytes(ref(storage, \"\" + imageName), blob);\n\n                case 8:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, null, null, null, Promise);\n        };\n\n        uploadImage();\n        setTimeout(function () {\n          getDownloadURL(ref(storage, \"\" + imageName)).then(function (url) {\n            fetch(\"https://crewcoin.herokuapp.com/store\", {\n              method: \"POST\",\n              headers: {\n                authorization: \"bearer \" + token,\n                credentials: \"same-origin\",\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json\",\n                mode: \"cors\"\n              },\n              body: JSON.stringify({\n                \"title\": postData.title,\n                \"description\": postData.description,\n                \"image\": url,\n                \"portalId\": value.portalId,\n                \"cost\": postData.cost\n              })\n            }).then(function (res) {\n              return res.json();\n            }).then(function (res) {\n              if (res.success) {\n                triggerPushNotificationHandler(usersPushtoken, \"New Store Item!\", postData.title + \" Cost: \" + coin(postData.cost));\n                setPrizes(function (prizesData) {\n                  return [].concat(_toConsumableArray(prizesData), [res.store]);\n                });\n                Alert.alert(\"Success!\", res.store.title + \" has been posted!\", [{\n                  text: \"OK\",\n                  onPress: function onPress() {\n                    return console.log(\"OK Pressed\");\n                  }\n                }]);\n                setPost({\n                  title: \"\",\n                  description: \"\",\n                  imageUrl: \"\",\n                  cost: \"\"\n                });\n              } else {\n                Alert.alert(\"Something went wrong\", \"Error\", [{\n                  text: \"OK\",\n                  onPress: function onPress() {\n                    return console.log(\"OK Pressed\");\n                  }\n                }]);\n              }\n            }).catch(function (err) {\n              Alert.alert(\"Error\", \"Please check internet connection!\", [{\n                text: \"OK\",\n                onPress: function onPress() {\n                  return console.log(\"OK Pressed\");\n                }\n              }]);\n            });\n            setIsLoading(false);\n          }).catch(function (error) {\n            Alert.alert(\"Error\", \"Please login again\", [{\n              text: \"OK\",\n              onPress: function onPress() {\n                return console.log(\"OK Pressed\");\n              }\n            }]);\n            navigation.navigate(\"Login\");\n          });\n        }, 3000);\n      }\n    }\n\n    var getImageFromCamera = function getImageFromCamera() {\n      var cameraPermission, cameraRollPermission, capturedImage;\n      return _regeneratorRuntime.async(function getImageFromCamera$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA));\n\n            case 2:\n              cameraPermission = _context3.sent;\n              _context3.next = 5;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA_ROLL));\n\n            case 5:\n              cameraRollPermission = _context3.sent;\n\n              if (!(cameraPermission.status === 'granted' && cameraRollPermission.status === 'granted')) {\n                _context3.next = 11;\n                break;\n              }\n\n              _context3.next = 9;\n              return _regeneratorRuntime.awrap(ImagePicker.launchCameraAsync({\n                allowsEditing: true,\n                aspect: [1, 1]\n              }));\n\n            case 9:\n              capturedImage = _context3.sent;\n\n              if (!capturedImage.cancelled) {\n                console.log(capturedImage);\n                processImage(capturedImage.uri);\n                MediaLibrary.createAssetAsync(capturedImage.uri);\n              }\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    var getImageFromGallery = function getImageFromGallery() {\n      var cameraPermission, cameraRollPermission, capturedImage;\n      return _regeneratorRuntime.async(function getImageFromGallery$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA));\n\n            case 2:\n              cameraPermission = _context4.sent;\n              _context4.next = 5;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA_ROLL));\n\n            case 5:\n              cameraRollPermission = _context4.sent;\n\n              if (!(cameraPermission.status === 'granted' && cameraRollPermission.status === 'granted')) {\n                _context4.next = 11;\n                break;\n              }\n\n              _context4.next = 9;\n              return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n                allowsEditing: true,\n                aspect: [1, 1]\n              }));\n\n            case 9:\n              capturedImage = _context4.sent;\n\n              if (!capturedImage.cancelled) {\n                processImage(capturedImage.uri);\n              }\n\n            case 11:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    var processImage = function processImage(imgUri) {\n      var processedImage;\n      return _regeneratorRuntime.async(function processImage$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return _regeneratorRuntime.awrap(ImageManipulator.manipulateAsync(imgUri, [{\n                resize: {\n                  width: 400\n                }\n              }], {\n                format: ImageManipulator.SaveFormat.PNG\n              }));\n\n            case 2:\n              processedImage = _context5.sent;\n              setPost(_objectSpread(_objectSpread({}, postData), {}, {\n                imageUrl: processedImage.uri,\n                image: processedImage\n              }));\n\n            case 4:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    if (value.admin) {\n      function TempImage() {\n        if (imageUrl) {\n          return _jsx(Image, {\n            alt: \"temp\",\n            shadow: 9,\n            style: {\n              width: 300,\n              height: 300,\n              borderRadius: 5\n            },\n            source: {\n              uri: imageUrl\n            },\n            resizeMode: \"contain\"\n          });\n        } else {\n          return null;\n        }\n      }\n\n      var memoizedTempImage = useMemo(TempImage);\n      return _jsx(_Fragment, {\n        children: _jsx(Box, {\n          shadow: 2,\n          mt: \"2\",\n          mb: \"2\",\n          pt: \"2\",\n          style: styles.image2,\n          maxW: \"360\",\n          rounded: \"lg\",\n          overflow: \"hidden\",\n          borderColor: \"gray.200\",\n          borderWidth: \"1\",\n          _dark: {\n            borderColor: \"gray.900\",\n            backgroundColor: \"gray.900\"\n          },\n          _web: {\n            shadow: 2,\n            borderWidth: 1\n          },\n          _light: {\n            backgroundColor: \"gray.50\"\n          },\n          children: _jsxs(Stack, {\n            w: \"100%\",\n            p: \"4\",\n            space: 3,\n            children: [_jsxs(HStack, {\n              alignItems: \"center\",\n              children: [_jsx(Heading, {\n                size: \"md\",\n                ml: \"-1\",\n                children: \"Add New Store Item\"\n              }), _jsx(TouchableOpacity, {\n                onPress: function onPress() {\n                  getImageFromCamera();\n                },\n                children: _jsx(Image, {\n                  mt: \"4\",\n                  style: styles.image3,\n                  source: require(\"../assets/images/camera1.png\"),\n                  resizeMode: \"contain\"\n                })\n              }), _jsx(TouchableOpacity, {\n                onPress: function onPress() {\n                  getImageFromGallery();\n                },\n                children: _jsx(Image, {\n                  mt: \"4\",\n                  style: styles.image4,\n                  source: require(\"../assets/images/camera.png\"),\n                  resizeMode: \"contain\"\n                })\n              })]\n            }), _jsx(Center, {\n              children: memoizedTempImage\n            }), _jsx(Input, {\n              value: postData.title,\n              onChangeText: function onChangeText(value) {\n                return setPost(_objectSpread(_objectSpread({}, postData), {}, {\n                  title: value\n                }));\n              },\n              placeholder: \"Title\"\n            }), _jsx(Input, {\n              value: postData.description,\n              onChangeText: function onChangeText(value) {\n                return setPost(_objectSpread(_objectSpread({}, postData), {}, {\n                  description: value\n                }));\n              },\n              placeholder: \"Description\"\n            }), _jsx(Input, {\n              value: postData.cost,\n              onChangeText: function onChangeText(value) {\n                return setPost(_objectSpread(_objectSpread({}, postData), {}, {\n                  cost: value\n                }));\n              },\n              placeholder: \"Price\"\n            }), _jsx(Button, {\n              shadow: 3,\n              onPress: function onPress() {\n                handlePost(setPrizes);\n              },\n              children: \" Post New Item\"\n            })]\n          })\n        })\n      });\n    } else {\n      return null;\n    }\n  }\n\n  var Prizes = function Prizes() {\n    var _useContext2 = useContext(UserContext),\n        value = _useContext2.value,\n        setValue = _useContext2.setValue;\n\n    var _useState13 = useState([]),\n        _useState14 = _slicedToArray(_useState13, 2),\n        prizesData = _useState14[0],\n        setPrizes = _useState14[1];\n\n    var _useState15 = useState([]),\n        _useState16 = _slicedToArray(_useState15, 2),\n        balanceData = _useState16[0],\n        setBalance = _useState16[1];\n\n    useEffect(function () {\n      fetch(\"https://crewcoin.herokuapp.com/store/\" + value.portalId, {\n        method: \"GET\",\n        headers: {\n          authorization: \"bearer \" + token,\n          credentials: \"same-origin\",\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          mode: \"cors\"\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        if (res.success) {\n          setPrizes(res.prizes);\n        } else {\n          Alert.alert(\"Something went wrong\", \"Error\", [{\n            text: \"OK\",\n            onPress: function onPress() {\n              return console.log(\"OK Pressed\");\n            }\n          }]);\n        }\n      }).catch(function (err) {\n        console.log(err);\n        Alert.alert(\"Error\", \"Please check internet connection! You may need to login again\", [{\n          text: \"OK\",\n          onPress: function onPress() {\n            return console.log(\"OK Pressed\");\n          }\n        }]);\n      });\n    }, []);\n    var prizes = prizesData.sort(function (a, b) {\n      return new Date(b.createdAt) - new Date(a.createdAt);\n    });\n\n    function postImage(prizes) {\n      if (prizes.image) {\n        return _jsx(Image, {\n          borderColor: \"gray.200\",\n          shadow: 9,\n          width: 300,\n          alt: prizes.createdAt,\n          source: {\n            uri: prizes.image\n          },\n          style: {\n            width: 300,\n            height: 300,\n            borderRadius: 5,\n            resizeMode: 'contain'\n          }\n        });\n      } else {\n        return null;\n      }\n    }\n\n    function deleteButton(prize) {\n      if (value.admin) {\n        return _jsx(Button, {\n          colorScheme: \"rose\",\n          mb: \"2\",\n          onPress: function onPress() {\n            Alert.alert(\"Remove Prize\", \"Are you sure you want to remove this prize?\", [{\n              text: \"Cancel\",\n              onPress: function onPress() {\n                return console.log(\"Cancel Pressed\");\n              },\n              style: \"cancel\"\n            }, {\n              text: \"OK\",\n              onPress: function onPress() {\n                deletePrize(prize);\n              }\n            }], {\n              cancelable: false\n            });\n          },\n          children: \"Remove Item\"\n        });\n      } else {\n        return null;\n      }\n    }\n\n    function buyButton(prize) {\n      var amount = value.balance - prize.cost;\n      console.log(amount, \"amount\");\n\n      function purchasePrize(prize) {\n        if (value.balance >= prize.cost) {\n          setIsLoading(true);\n          fetch(\"https://crewcoin.herokuapp.com/crewuser/\" + value._id, {\n            method: \"PUT\",\n            headers: {\n              authorization: \"bearer \" + token,\n              credentials: \"same-origin\",\n              Accept: \"application/json\",\n              \"Content-Type\": \"application/json\",\n              mode: \"cors\"\n            },\n            body: JSON.stringify({\n              \"email\": value.username,\n              \"cost\": prize.cost,\n              \"name\": value.firstname + \" \" + value.lastname,\n              \"balance\": amount,\n              \"purchase\": true,\n              \"portalId\": value.portalId,\n              \"history\": {\n                \"date\": new Date(),\n                \"action\": \"Purchased \" + prize.title + \" for\",\n                \"balance\": amount,\n                \"userEmail\": value.username,\n                \"prize\": prize,\n                \"who\": \"\",\n                \"amount\": prize.cost,\n                \"comments\": \"Congratulations on your purchase!\"\n              }\n            })\n          }).then(function (res) {\n            return res.json();\n          }).then(function (res) {\n            if (res.success) {\n              triggerPushNotificationHandler(adminPushToken, \"New Purchase from \" + value.firstname + \" \" + value.lastname + \"!\", prize.title + \" Cost: \" + coin(prize.cost));\n              var balance = res.crewuser.balance - prize.cost;\n              setValue(_objectSpread(_objectSpread({}, value), {}, {\n                balance: balance\n              }));\n              setIsLoading(false);\n              Alert.alert(prize.title + \" purchased!\", \"Please see your manager for further details\", [{\n                text: \"OK\",\n                onPress: function onPress() {\n                  console.log(\"OK Pressed\");\n                }\n              }], {\n                cancelable: false\n              });\n            } else {\n              Alert.alert(\"\" + err, \"Please check internet connection!\", [{\n                text: \"OK\",\n                onPress: function onPress() {\n                  return console.log(\"OK Pressed\");\n                }\n              }]);\n              setIsLoading(false);\n            }\n          }).catch(function (err) {\n            Alert.alert(\"Error\", \"Please login again\", [{\n              text: \"OK\",\n              onPress: function onPress() {\n                return console.log(\"OK Pressed\");\n              }\n            }]);\n            navigation.navigate(\"Login\");\n          });\n        } else {\n          Alert.alert(\"Insufficient Funds\", \"Current balance: \" + coin(value.balance) + \".\", [{\n            text: \"OK\",\n            onPress: function onPress() {\n              console.log(\"OK Pressed\");\n            }\n          }], {\n            cancelable: false\n          });\n        }\n      }\n\n      if (!value.admin) {\n        return _jsx(Button, {\n          mb: \"2\",\n          onPress: function onPress() {\n            Alert.alert(\"Purchase\", \"Are you sure you want to purchase this \" + prize.title + \"?\", [{\n              text: \"Cancel\",\n              onPress: function onPress() {\n                return console.log(\"Cancel Pressed\");\n              },\n              style: \"cancel\"\n            }, {\n              text: \"OK\",\n              onPress: function onPress() {\n                purchasePrize(prize);\n              }\n            }], {\n              cancelable: false\n            });\n          },\n          children: \"Buy Now\"\n        });\n      } else {\n        return null;\n      }\n    }\n\n    function deletePrize(prize) {\n      var storage = getStorage();\n      var prizeRef = ref(storage, prize.image);\n      deleteObject(prizeRef).then(function () {}).catch(function (error) {});\n      fetch(\"https://crewcoin.herokuapp.com/store/\" + prize._id, {\n        method: \"DELETE\",\n        headers: {\n          authorization: \"bearer \" + token,\n          credentials: \"same-origin\",\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          mode: \"cors\"\n        },\n        body: JSON.stringify({\n          \"prizeId\": prize._id\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        if (res.success) {\n          Alert.alert(\"Prize\", \"Deleted\", [{\n            text: \"OK\",\n            onPress: function onPress() {\n              return console.log(\"OK Pressed\");\n            }\n          }]);\n          setPrizes(function (prizes) {\n            return prizes.filter(function (prize) {\n              return prize._id !== res.prizeId;\n            });\n          });\n          setValue(_objectSpread(_objectSpread({}, value), {}, {\n            store: res.store\n          }));\n        } else {\n          Alert.alert(\"Something went wrong\", \"Error\", [{\n            text: \"OK\",\n            onPress: function onPress() {\n              return console.log(\"OK Pressed\");\n            }\n          }]);\n        }\n      }).catch(function (err) {\n        Alert.alert(\"Error\", \"Please login again\", [{\n          text: \"OK\",\n          onPress: function onPress() {\n            return console.log(\"OK Pressed\");\n          }\n        }]);\n        navigation.navigate(\"Login\");\n      });\n    }\n\n    function coin(cost) {\n      if (cost > 1) {\n        return cost + \" Crew Coins\";\n      } else {\n        return cost + \" Crew Coin\";\n      }\n    }\n\n    return prizes.map(function (prize) {\n      return _jsxs(Box, {\n        pt: \"5\",\n        shadow: 2,\n        style: styles.image5,\n        mb: \"2\",\n        maxW: \"360\",\n        rounded: \"lg\",\n        overflow: \"hidden\",\n        borderColor: \"gray.300\",\n        borderWidth: \"1\",\n        _dark: {\n          borderColor: \"gray.900\",\n          backgroundColor: \"gray.900\"\n        },\n        _web: {\n          shadow: 2,\n          borderWidth: 0\n        },\n        _light: {\n          backgroundColor: \"gray.50\"\n        },\n        children: [_jsx(Box, {\n          children: postImage(prize)\n        }), _jsxs(Stack, {\n          w: \"330\",\n          p: \"2\",\n          space: 3,\n          children: [_jsx(Stack, {\n            children: _jsx(Heading, {\n              fontSize: 16,\n              children: prize.title\n            })\n          }), _jsx(Divider, {}), _jsx(Text, {\n            fontWeight: \"400\",\n            fontSize: 14,\n            children: prize.description\n          }), _jsx(Divider, {}), _jsxs(HStack, {\n            alignItems: \"center\",\n            space: 2,\n            justifyContent: \"space-between\",\n            children: [_jsx(HStack, {\n              alignItems: \"center\",\n              children: _jsx(Text, {\n                fontWeight: \"500\",\n                color: \"amber.600\",\n                _dark: {\n                  color: \"amber.600\"\n                },\n                fontWeight: \"600\",\n                fontSize: 16,\n                children: coin(prize.cost)\n              })\n            }), buyButton(prize), deleteButton(prize)]\n          })]\n        })]\n      });\n    });\n  };\n\n  return _jsx(KeyboardAvoidingView, {\n    style: {\n      flex: 1\n    },\n    behavior: \"height\",\n    enabled: true,\n    children: _jsxs(NativeBaseProvider, {\n      children: [_jsx(AppBar, {}), _jsxs(ImageBackground, {\n        imageStyle: {\n          opacity: 0.6\n        },\n        alt: \"bg\",\n        style: styles.image2,\n        source: require(\"../assets/images/splashbg2.png\"),\n        resizeMode: \"cover\",\n        children: [Spinner(), _jsxs(ScrollView, {\n          children: [_jsx(Example, {\n            prizes: prizes\n          }), _jsx(Prizes, {\n            prizes: prizes\n          })]\n        })]\n      }), _jsx(CardBalance, {})]\n    })\n  });\n}\n\nfunction AppBar() {\n  var _useContext3 = useContext(UserContext),\n      value = _useContext3.value,\n      setValue = _useContext3.setValue;\n\n  return _jsxs(_Fragment, {\n    children: [_jsx(Box, {\n      safeAreaTop: true,\n      backgroundColor: \"#f2f2f2\"\n    }), _jsxs(HStack, {\n      bg: \"amber.300\",\n      px: \"5\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      borderColor: \"gray.300\",\n      borderWidth: \"1\",\n      children: [_jsx(HStack, {\n        space: \"4\",\n        alignItems: \"center\",\n        children: _jsx(Image, {\n          style: styles.coin,\n          source: require(\"../assets/images/crewcoinlogo.png\")\n        })\n      }), _jsx(HStack, {\n        space: \"4\",\n        children: _jsx(Text, {\n          px: \"1\",\n          style: styles.icon,\n          children: value.firstname + \" \" + value.lastname\n        })\n      })]\n    })]\n  });\n}\n\nfunction CardBalance() {\n  var _useContext4 = useContext(UserContext),\n      value = _useContext4.value,\n      setValue = _useContext4.setValue;\n\n  return _jsx(_Fragment, {\n    children: _jsx(VStack, {\n      borderColor: \"amber.400\",\n      borderWidth: \"1\",\n      space: \"2\",\n      bg: \"amber.300\",\n      px: \"2\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      children: _jsx(Center, {\n        children: _jsxs(HStack, {\n          children: [_jsx(Image, {\n            style: styles.coinbalance,\n            source: require(\"../assets/images/coinbalance.png\")\n          }), _jsx(Text, {\n            bold: true,\n            style: styles.icon2,\n            children: value.balance\n          })]\n        })\n      })\n    })\n  });\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  icon: {\n    color: 'black',\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  gif: {\n    width: 80,\n    height: 80,\n    marginTop: -30,\n    marginLeft: -30\n  },\n  icon2: {\n    color: 'black',\n    fontSize: 41,\n    paddingTop: 23,\n    marginTop: 6,\n    opacity: 0.9,\n    fontFamily: 'System'\n  },\n  coin: {\n    width: 200,\n    resizeMode: 'contain',\n    height: 50,\n    marginLeft: -32\n  },\n  coingif: {\n    size: '100%'\n  },\n  coingif: {\n    width: 10\n  },\n  coinbalance: {\n    zIndex: 2,\n    resizeMode: 'contain',\n    width: 210,\n    marginTop: -90,\n    marginBottom: -110\n  },\n  image: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: '100%',\n    height: '100%',\n    resizeMode: 'cover'\n  },\n  image2: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: '100%',\n    height: '100%',\n    marginBottom: 20,\n    marginBottom: 5\n  },\n  image3: {\n    width: 45,\n    resizeMode: 'contain',\n    marginBottom: -85,\n    marginTop: -90,\n    marginLeft: 35\n  },\n  image4: {\n    width: 51,\n    resizeMode: 'contain',\n    marginBottom: -85,\n    marginTop: -90,\n    marginLeft: 10\n  },\n  image5: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: 450,\n    resizeMode: 'cover'\n  },\n  title: {\n    width: 400,\n    resizeMode: 'cover',\n    marginTop: -100,\n    marginBottom: -100,\n    margin: -100\n  },\n  header: {\n    marginTop: '15%',\n    marginLeft: '18%',\n    justifyContent: 'flex-start',\n    alignItems: 'flex-start',\n    backgroundColor: '#fff'\n  },\n  BalanceBar: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    borderTopLeftRadius: 60,\n    borderTopRightRadius: 60\n  },\n  center: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  coin2: {\n    width: 80,\n    height: 50\n  }\n});","map":{"version":3,"sources":["C:/Users/DavidWIlliams/Desktop/crewCoin/screens/TabThreeScreen.js"],"names":["NativeBaseProvider","Box","Input","Heading","Divider","Stack","HStack","Text","VStack","Center","Button","ScrollView","prizes","useContext","useEffect","useMemo","useState","UserContext","ImagePicker","Permissions","ImageManipulator","MediaLibrary","firebaseConfig","initializeApp","useIsFocused","getStorage","ref","uploadBytes","getDownloadURL","deleteObject","moment","SecureStore","useNavigation","TabThreeScreen","value","setValue","prizesData","setPrizes","isLoading","setIsLoading","isFocused","userData","setUser","adminPushToken","setAdmin","token","setToken","navigation","getValueFor","key","getItemAsync","result","console","log","triggerPushNotificationHandler","title","body","fetch","method","headers","Accept","JSON","stringify","to","getAsync","NOTIFICATIONS","then","statusObj","status","askAsync","Error","catch","err","portalId","authorization","credentials","mode","res","json","admin","filter","user","pushToken","Alert","alert","text","onPress","navigate","newStoreItem","_id","newTransaction","newAnnouncement","success","crewuser","Spinner","require","marginTop","width","height","justifyContent","alignItems","zIndex","top","resizeMode","Example","postData","setPost","imageUrl","handlePost","removeAdmin","el","username","length","usersPushtoken","map","coin","cost","description","Number","isInteger","parseInt","imageName","Date","format","storage","uploadImage","img","response","blob","setTimeout","url","store","error","getImageFromCamera","CAMERA","cameraPermission","CAMERA_ROLL","cameraRollPermission","launchCameraAsync","allowsEditing","aspect","capturedImage","cancelled","processImage","uri","createAssetAsync","getImageFromGallery","launchImageLibraryAsync","imgUri","manipulateAsync","resize","SaveFormat","PNG","processedImage","image","TempImage","borderRadius","memoizedTempImage","styles","image2","borderColor","backgroundColor","shadow","borderWidth","image3","image4","Prizes","balanceData","setBalance","sort","a","b","createdAt","postImage","deleteButton","prize","style","deletePrize","cancelable","buyButton","amount","balance","purchasePrize","firstname","lastname","prizeRef","prizeId","image5","color","flex","opacity","AppBar","icon","CardBalance","coinbalance","icon2","StyleSheet","create","container","fontSize","fontWeight","gif","marginLeft","paddingTop","fontFamily","coingif","size","marginBottom","margin","header","BalanceBar","position","bottom","left","right","borderTopLeftRadius","borderTopRightRadius","center","coin2"],"mappings":"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","sourcesContent":["import { StyleSheet, ImageBackground, Image, TouchableOpacity, Alert, KeyboardAvoidingView } from \"react-native\";\r\nimport { NativeBaseProvider, Box, Input, Heading, Divider, Stack, HStack, Text, VStack, Center, Button } from 'native-base';\r\nimport { ScrollView } from \"react-native-gesture-handler\";\r\nimport prizes from './sample';\r\nimport { useContext, useEffect, useMemo } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { UserContext } from \"./UserContext\";\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport * as Permissions from 'expo-permissions';\r\nimport * as ImageManipulator from 'expo-image-manipulator';\r\nimport * as MediaLibrary from 'expo-media-library';\r\nimport firebaseConfig from \"../firebaseConfig.tsx\";\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { useIsFocused } from '@react-navigation/native';\r\nimport { getStorage, ref, uploadBytes, getDownloadURL, deleteObject } from \"firebase/storage\";\r\nimport moment from \"moment\";\r\nimport * as SecureStore from 'expo-secure-store';\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\n\r\ninitializeApp(firebaseConfig);\r\n\r\nexport default function TabThreeScreen() {\r\n  const { value, setValue } = useContext(UserContext);\r\n  const [prizesData, setPrizes] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const isFocused = useIsFocused();\r\n  const [userData, setUser] = useState([]);\r\n  const [adminPushToken, setAdmin] = useState([]);\r\n  const [token, setToken] = useState('');\r\n  const navigation = useNavigation();\r\n\r\n\r\n  async function getValueFor(key) {\r\n    let result = await SecureStore.getItemAsync(key);\r\n    if (result) {\r\n      setToken(result);\r\n    } else {\r\n      console.log('No values stored under that key.');\r\n    }\r\n  }\r\n  getValueFor('token');\r\n  console.log(token);\r\n\r\n\r\n  const triggerPushNotificationHandler = (token, title, body) => {\r\n    fetch(\"https://exp.host/--/api/v2/push/send\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Accept-Encoding\": \"gzip,deflate\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        to: token,\r\n        title,\r\n        body,\r\n      }),\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    // Permission for iOS\r\n    Permissions.getAsync(Permissions.NOTIFICATIONS)\r\n      .then(statusObj => {\r\n        // Check if we already have permission\r\n        if (statusObj.status !== \"granted\") {\r\n          // If permission is not there, ask for the same\r\n          return Permissions.askAsync(Permissions.NOTIFICATIONS)\r\n        }\r\n        return statusObj\r\n      })\r\n      .then(statusObj => {\r\n        // If permission is still not given throw error\r\n        if (statusObj.status !== \"granted\") {\r\n          throw new Error(\"Permission not granted\")\r\n        }\r\n      })\r\n      .catch(err => {\r\n        return null\r\n      })\r\n\r\n      //fetch store items\r\n      fetch(`https://crewcoin.herokuapp.com/crewuser/${value.portalId}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          authorization: `bearer ${token}`,\r\n          credentials: \"same-origin\",\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          mode: \"cors\"\r\n        },\r\n      })\r\n        .then(res => res.json())\r\n        .then(res => {\r\n          if (res) {\r\n            setUser(res);\r\n            // let self = res.filter(user => user.username === value.username);\r\n            // setValue(self[0]);\r\n            const admin = res.filter(user => user.admin === true)\r\n            const adminPushToken = admin[0].pushToken;\r\n            setAdmin(adminPushToken);\r\n            setIsLoading(false);\r\n          } else {\r\n            Alert.alert(\r\n              \"Error\",\r\n              \"Please check your internet connection\",\r\n              [\r\n\r\n                { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n              ]\r\n            )\r\n            setIsLoading(false);\r\n          }\r\n        })\r\n        .catch(err => {\r\n          Alert.alert(\r\n            \"Error\",\r\n            \"Please login again\",\r\n            [\r\n              { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n            ]\r\n          )\r\n          navigation.navigate(\"Login\");\r\n        }\r\n        );\r\n\r\n      // update alerts\r\n      if (value.newStoreItem) {\r\n      fetch(`https://crewcoin.herokuapp.com/crewuser/alert/${value._id}`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n          //bearer token\r\n          authorization: `bearer ${token}`,\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          mode: \"cors\"\r\n        },\r\n        body: JSON.stringify({\r\n          \"newStoreItem\": false,\r\n          \"newTransaction\": value.newTransaction,\r\n          \"newAnnouncement\": value.newAnnouncement,\r\n        }),\r\n      })\r\n\r\n        .then(res => res.json())\r\n        .then(res => {\r\n          if (res.success) {\r\n            setValue(res.crewuser);\r\n          } else {\r\n            Alert.alert(\r\n              `${err}`,\r\n              \"Please check internet connection!\",\r\n              [\r\n\r\n                { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n              ]\r\n            )\r\n          }\r\n        })\r\n        .catch(err => {\r\n          Alert.alert(\r\n            \"Error\",\r\n            \"Please login again\",\r\n            [\r\n              { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n            ]\r\n          )\r\n          navigation.navigate(\"Login\");\r\n        });\r\n      }                       \r\n  }, []);\r\n\r\n\r\n\r\n  function Spinner() {\r\n    if (isLoading) {\r\n      return (\r\n        <Image alt=\"spinner\" source={require('../assets/images/genericspinner.gif')}\r\n          style={{ marginTop: \"-28%\", width: '30%', height: '20%', justifyContent: \"center\", alignItems: \"center\", zIndex: 20000000, top: \"48%\", resizeMode: \"contain\" }} />\r\n      )\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  function Example() {\r\n    const [postData, setPost] = useState({});\r\n    const imageUrl = postData.imageUrl;\r\n\r\n    function handlePost(setPrizes) {\r\n      let removeAdmin = userData.filter(el => el.admin === false);\r\n      let user = removeAdmin.filter(el => el.username !== value.username && el.pushToken.length > 0);\r\n      let usersPushtoken = user.map(el => el.pushToken);\r\n\r\n      function coin(cost) {\r\n        if (cost > 1) {\r\n          return (\r\n            `${cost} Crew Coins`\r\n          )\r\n        } else {\r\n          return (\r\n            `${cost} Crew Coin`\r\n          )\r\n        }\r\n      }\r\n\r\n      if (!postData.title || !postData.description || !postData.imageUrl || !postData.cost || Number.isInteger(parseInt(postData.cost)) === false) {\r\n        Alert.alert(\"Please fill in all fields and add photo! Cost must be a number!\");\r\n      } else {\r\n        setIsLoading(true);\r\n        const imageName = `${value.portalId}_prize_${moment(new Date).format(\"MMDDYYYYhmma\")}`\r\n        const storage = getStorage();\r\n        const uploadImage = async () => {\r\n          const img = postData.imageUrl;\r\n          const response = await fetch(postData.imageUrl);\r\n          const blob = await response.blob();\r\n          uploadBytes(ref(storage, `${imageName}`), blob);\r\n          // const url = await ref(`${imageName}`).getDownloadURL();\r\n          // console.log(url);\r\n        }\r\n        uploadImage();\r\n        setTimeout(() => {\r\n          getDownloadURL(ref(storage, `${imageName}`))\r\n            .then((url) => {\r\n              fetch(`https://crewcoin.herokuapp.com/store`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                  authorization: `bearer ${token}`,\r\n                  credentials: \"same-origin\",\r\n                  Accept: \"application/json\",\r\n                  \"Content-Type\": \"application/json\",\r\n                  mode: \"cors\"\r\n                },\r\n                body: JSON.stringify({\r\n                  \"title\": postData.title,\r\n                  \"description\": postData.description,\r\n                  \"image\": url,\r\n                  \"portalId\": value.portalId,\r\n                  \"cost\": postData.cost,\r\n                }),\r\n              })\r\n\r\n                .then(res => res.json())\r\n                .then(res => {\r\n                  if (res.success) {\r\n                    triggerPushNotificationHandler(usersPushtoken, `New Store Item!`, `${postData.title} Cost: ${coin(postData.cost)}`);\r\n                    setPrizes(prizesData => [...prizesData, res.store])\r\n                    Alert.alert(\r\n                      \"Success!\",\r\n                      `${res.store.title} has been posted!`,\r\n                      [\r\n                        { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n                      ]\r\n                    );\r\n                    setPost({ title: \"\", description: \"\", imageUrl: \"\", cost: \"\" });\r\n                  } else {\r\n                    Alert.alert(\r\n                      \"Something went wrong\",\r\n                      `Error`,\r\n                      [\r\n                        { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n                      ]\r\n                    );\r\n                  }\r\n                })\r\n                .catch(err => {\r\n                  Alert.alert(\r\n                    `Error`,\r\n                    \"Please check internet connection!\",\r\n                    [\r\n\r\n                      { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n                    ]\r\n                  )\r\n                }\r\n                );\r\n              setIsLoading(false);\r\n            })\r\n            .catch((error) => {\r\n              Alert.alert(\r\n                \"Error\",\r\n                \"Please login again\",\r\n                [\r\n                  { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n                ]\r\n              )\r\n              navigation.navigate(\"Login\");\r\n            })\r\n        }, 3000);\r\n      }\r\n\r\n    }\r\n\r\n\r\n    let getImageFromCamera = async () => {\r\n      const cameraPermission = await Permissions.askAsync(Permissions.CAMERA);\r\n      const cameraRollPermission = await Permissions.askAsync(Permissions.CAMERA_ROLL);\r\n\r\n      if (cameraPermission.status === 'granted' && cameraRollPermission.status === 'granted') {\r\n        const capturedImage = await ImagePicker.launchCameraAsync({\r\n          allowsEditing: true,\r\n          aspect: [1, 1]\r\n        });\r\n        if (!capturedImage.cancelled) {\r\n          console.log(capturedImage);\r\n          processImage(capturedImage.uri);\r\n          MediaLibrary.createAssetAsync(capturedImage.uri);\r\n        }\r\n      }\r\n    }\r\n    let getImageFromGallery = async () => {\r\n      const cameraPermission = await Permissions.askAsync(Permissions.CAMERA);\r\n      const cameraRollPermission = await Permissions.askAsync(Permissions.CAMERA_ROLL);\r\n\r\n      if (cameraPermission.status === 'granted' && cameraRollPermission.status === 'granted') {\r\n        const capturedImage = await ImagePicker.launchImageLibraryAsync({\r\n          allowsEditing: true,\r\n          aspect: [1, 1]\r\n        });\r\n        if (!capturedImage.cancelled) {\r\n          processImage(capturedImage.uri);\r\n        }\r\n      }\r\n    }\r\n    let processImage = async (imgUri) => {\r\n      const processedImage = await ImageManipulator.manipulateAsync(imgUri,\r\n        [{ resize: { width: 400 } }],\r\n        { format: ImageManipulator.SaveFormat.PNG }\r\n      );\r\n      setPost({ ...postData, imageUrl: processedImage.uri, image: processedImage });\r\n    }\r\n\r\n    if (value.admin) {\r\n      function TempImage() {\r\n        if (imageUrl) {\r\n          return (\r\n            <Image alt=\"temp\" shadow={9} style={{ width: 300, height: 300, borderRadius: 5 }}\r\n              source={{ uri: imageUrl }} resizeMode=\"contain\" />\r\n          )\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n      const memoizedTempImage = useMemo(TempImage);\r\n\r\n\r\n      return (\r\n\r\n        <>\r\n          <Box\r\n            shadow={2}\r\n            mt=\"2\"\r\n            mb=\"2\"\r\n            pt=\"2\"\r\n            style={styles.image2}\r\n            maxW=\"360\"\r\n            rounded=\"lg\"\r\n            overflow=\"hidden\"\r\n            borderColor=\"gray.200\"\r\n            borderWidth=\"1\"\r\n            _dark={{\r\n              borderColor: \"gray.900\",\r\n              backgroundColor: \"gray.900\",\r\n            }}\r\n            _web={{\r\n              shadow: 2,\r\n              borderWidth: 1,\r\n            }}\r\n            _light={{\r\n              backgroundColor: \"gray.50\",\r\n            }}\r\n          >\r\n            <Stack w=\"100%\" p=\"4\" space={3}>\r\n              <HStack alignItems=\"center\">\r\n                <Heading size=\"md\" ml=\"-1\" >\r\n                  Add New Store Item\r\n                </Heading>\r\n                <TouchableOpacity onPress={() => { getImageFromCamera() }}>\r\n                  <Image mt=\"4\" style={styles.image3} source={require('../assets/images/camera1.png')} resizeMode=\"contain\" />\r\n                </TouchableOpacity>\r\n                <TouchableOpacity onPress={() => { getImageFromGallery() }}>\r\n                  <Image mt=\"4\" style={styles.image4} source={require('../assets/images/camera.png')} resizeMode=\"contain\" />\r\n                </TouchableOpacity>\r\n              </HStack>\r\n              <Center>\r\n                {memoizedTempImage}\r\n              </Center>\r\n              <Input value={postData.title} onChangeText={(value) => setPost({ ...postData, title: value })} placeholder=\"Title\" />\r\n              <Input value={postData.description} onChangeText={(value) => setPost({ ...postData, description: value })} placeholder=\"Description\" />\r\n              <Input value={postData.cost} onChangeText={(value) => setPost({ ...postData, cost: value })} placeholder=\"Price\" />\r\n\r\n              <Button shadow={3} onPress={() => { handlePost(setPrizes) }}> Post New Item</Button>\r\n            </Stack>\r\n          </Box>\r\n        </>\r\n      )\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  const Prizes = () => {\r\n    const { value, setValue } = useContext(UserContext);\r\n    const [prizesData, setPrizes] = useState([]);\r\n    const [balanceData, setBalance] = useState([]);\r\n    useEffect(() => {\r\n      fetch(`https://crewcoin.herokuapp.com/store/${value.portalId}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          authorization: `bearer ${token}`,\r\n          credentials: \"same-origin\",\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          mode: \"cors\"\r\n        },\r\n      })\r\n\r\n        .then(res => res.json())\r\n        .then(res => {\r\n          if (res.success) {\r\n            setPrizes(res.prizes);\r\n          } else {\r\n            Alert.alert(\r\n              \"Something went wrong\",\r\n              `Error`,\r\n              [\r\n                { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n              ]\r\n            );\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n          Alert.alert(\r\n            `Error`,\r\n            \"Please check internet connection! You may need to login again\",\r\n            [\r\n              { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n            ]\r\n          )\r\n        }\r\n        );\r\n    }, []);\r\n\r\n    let prizes = prizesData.sort(function (a, b) {\r\n      // Turn your strings into dates, and then subtract them\r\n      // to get a value that is either negative, positive, or zero.\r\n      return new Date(b.createdAt) - new Date(a.createdAt);\r\n    });\r\n\r\n\r\n    function postImage(prizes) {\r\n      if (prizes.image) {\r\n        return (\r\n          <Image\r\n            borderColor=\"gray.200\"\r\n            shadow={9}\r\n            width={300}\r\n            alt={prizes.createdAt}\r\n            source={{ uri: prizes.image }}\r\n            style={{ width: 300, height: 300, borderRadius: 5, resizeMode: 'contain' }}\r\n          />\r\n        )\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    function deleteButton(prize) {\r\n      if (value.admin) {\r\n        return (\r\n          <Button colorScheme=\"rose\" mb=\"2\" onPress={() => {\r\n            Alert.alert(\r\n              \"Remove Prize\",\r\n              \"Are you sure you want to remove this prize?\",\r\n              [\r\n                {\r\n                  text: \"Cancel\",\r\n                  onPress: () => console.log(\"Cancel Pressed\"),\r\n                  style: \"cancel\"\r\n                },\r\n                {\r\n                  text: \"OK\", onPress: () => {\r\n                    deletePrize(prize)\r\n                  }\r\n                }\r\n              ],\r\n              { cancelable: false }\r\n            );\r\n          }}>Remove Item</Button>\r\n        )\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n    function buyButton(prize) {\r\n      const amount = value.balance - prize.cost;\r\n      console.log(amount, \"amount\")\r\n\r\n\r\n      function purchasePrize(prize) {\r\n        if (value.balance >= prize.cost) {\r\n          setIsLoading(true);\r\n\r\n          fetch(`https://crewcoin.herokuapp.com/crewuser/${value._id}`, {\r\n            method: \"PUT\",\r\n            headers: {\r\n              authorization: `bearer ${token}`,\r\n              credentials: \"same-origin\",\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              mode: \"cors\"\r\n            },\r\n            body: JSON.stringify({\r\n              \"email\": value.username,\r\n              \"cost\": prize.cost,\r\n              \"name\": `${value.firstname} ${value.lastname}`,\r\n              \"balance\": amount,\r\n              \"purchase\": true,\r\n              \"portalId\": value.portalId,\r\n              \"history\": {\r\n                \"date\": new Date(),\r\n                \"action\": `Purchased ${prize.title} for`,\r\n                \"balance\": amount,\r\n                \"userEmail\": value.username,\r\n                \"prize\": prize,\r\n                \"who\": \"\",\r\n                \"amount\": prize.cost,\r\n                \"comments\": \"Congratulations on your purchase!\"\r\n\r\n              }\r\n            }),\r\n          })\r\n            .then(res => res.json())\r\n            .then(res => {\r\n              if (res.success) {\r\n                triggerPushNotificationHandler(\r\n                  adminPushToken,\r\n                  `New Purchase from ${value.firstname} ${value.lastname}!`,\r\n                  `${prize.title} Cost: ${coin(prize.cost)}`\r\n                );\r\n                const balance = res.crewuser.balance - prize.cost;\r\n                setValue({ ...value, balance: balance });\r\n                setIsLoading(false);\r\n                Alert.alert(\r\n                  `${prize.title} purchased!`,\r\n                  `Please see your manager for further details`,\r\n                  [\r\n                    {\r\n                      text: \"OK\", onPress: () => {\r\n                        console.log(\"OK Pressed\")\r\n                      }\r\n                    }\r\n                  ],\r\n                  { cancelable: false }\r\n                );\r\n              } else {\r\n                Alert.alert(\r\n                  `${err}`,\r\n                  \"Please check internet connection!\",\r\n                  [\r\n\r\n                    { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n                  ]\r\n                )\r\n                setIsLoading(false);\r\n              }\r\n            })\r\n            .catch(err => {\r\n              Alert.alert(\r\n                \"Error\",\r\n                \"Please login again\",\r\n                [\r\n                  { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n                ]\r\n              )\r\n              navigation.navigate(\"Login\");\r\n            }\r\n            );\r\n        }\r\n        else {\r\n          Alert.alert(\r\n            `Insufficient Funds`,\r\n            `Current balance: ${coin(value.balance)}.`,\r\n            [\r\n              {\r\n                text: \"OK\", onPress: () => {\r\n                  console.log(\"OK Pressed\")\r\n                }\r\n              }\r\n            ],\r\n            { cancelable: false }\r\n          );\r\n        }\r\n      }\r\n      if (!value.admin) {\r\n        return (\r\n          <Button mb=\"2\" onPress={() => {\r\n            Alert.alert(\r\n              \"Purchase\",\r\n              `Are you sure you want to purchase this ${prize.title}?`,\r\n              [\r\n                {\r\n                  text: \"Cancel\",\r\n                  onPress: () => console.log(\"Cancel Pressed\"),\r\n                  style: \"cancel\"\r\n                },\r\n                {\r\n                  text: \"OK\", onPress: () => {\r\n                    purchasePrize(prize)\r\n                  }\r\n                }\r\n              ],\r\n              { cancelable: false }\r\n            );\r\n          }}>Buy Now</Button>\r\n        )\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    function deletePrize(prize) {\r\n      const storage = getStorage();\r\n      var prizeRef = ref(storage, prize.image);\r\n\r\n      // Delete the file\r\n      deleteObject(prizeRef).then(() => {\r\n        // File deleted successfully\r\n      }).catch((error) => {\r\n        // Uh-oh, an error occurred!\r\n      });\r\n      fetch(`https://crewcoin.herokuapp.com/store/${prize._id}`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          authorization: `bearer ${token}`,\r\n          credentials: \"same-origin\",\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          mode: \"cors\"\r\n        },\r\n        body: JSON.stringify({\r\n          \"prizeId\": prize._id\r\n        }),\r\n      })\r\n\r\n        .then(res => res.json())\r\n        .then(res => {\r\n          if (res.success) {\r\n            Alert.alert(\r\n              \"Prize\",\r\n              `Deleted`,\r\n              [\r\n                { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n              ]\r\n            );\r\n            setPrizes(prizes => prizes.filter(prize => prize._id !== res.prizeId))\r\n            setValue({ ...value, store: res.store })\r\n          } else {\r\n            Alert.alert(\r\n              \"Something went wrong\",\r\n              `Error`,\r\n              [\r\n                { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n              ]\r\n            );\r\n          }\r\n        })\r\n        .catch(err => {\r\n          Alert.alert(\r\n            \"Error\",\r\n            \"Please login again\",\r\n            [\r\n              { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\r\n            ]\r\n          )\r\n          navigation.navigate(\"Login\");\r\n        }\r\n        );\r\n    }\r\n    function coin(cost) {\r\n      if (cost > 1) {\r\n        return (\r\n          `${cost} Crew Coins`\r\n        )\r\n      } else {\r\n        return (\r\n          `${cost} Crew Coin`\r\n        )\r\n      }\r\n    }\r\n    return (\r\n      prizes.map(prize => {\r\n        return (\r\n          <Box\r\n            pt=\"5\"\r\n            shadow={2}\r\n            style={styles.image5}\r\n            mb=\"2\"\r\n            maxW=\"360\"\r\n            rounded=\"lg\"\r\n            overflow=\"hidden\"\r\n            borderColor=\"gray.300\"\r\n            borderWidth=\"1\"\r\n            _dark={{\r\n              borderColor: \"gray.900\",\r\n              backgroundColor: \"gray.900\",\r\n            }}\r\n            _web={{\r\n              shadow: 2,\r\n              borderWidth: 0,\r\n            }}\r\n            _light={{\r\n              backgroundColor: \"gray.50\",\r\n            }}\r\n          >\r\n            <Box>\r\n              {postImage(prize)}\r\n            </Box>\r\n            <Stack w=\"330\" p=\"2\" space={3}>\r\n              <Stack>\r\n\r\n                <Heading fontSize={16}>\r\n                  {prize.title}\r\n                </Heading>\r\n\r\n              </Stack>\r\n              <Divider />\r\n              <Text fontWeight=\"400\" fontSize={14}>\r\n                {prize.description}\r\n              </Text>\r\n              <Divider />\r\n              <HStack alignItems=\"center\" space={2} justifyContent=\"space-between\">\r\n                <HStack alignItems=\"center\">\r\n                  <Text\r\n                    fontWeight=\"500\"\r\n                    color=\"amber.600\"\r\n                    _dark={{\r\n                      color: \"amber.600\",\r\n                    }}\r\n                    fontWeight=\"600\"\r\n                    fontSize={16}\r\n                  >\r\n                    {coin(prize.cost)}\r\n                  </Text>\r\n                </HStack>\r\n                {buyButton(prize)}\r\n                {deleteButton(prize)}\r\n              </HStack>\r\n            </Stack>\r\n          </Box>\r\n        )\r\n      })\r\n    )\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <KeyboardAvoidingView style={{ flex: 1 }} behavior=\"height\" enabled>\r\n      <NativeBaseProvider>\r\n        <AppBar />\r\n        <ImageBackground imageStyle=\r\n          {{ opacity: 0.6 }} alt=\"bg\" style={styles.image2} source={require('../assets/images/splashbg2.png')} resizeMode=\"cover\" >\r\n          {Spinner()}\r\n          <ScrollView>\r\n            <Example prizes={prizes} />\r\n            <Prizes prizes={prizes} />\r\n          </ScrollView>\r\n        </ImageBackground>\r\n        <CardBalance />\r\n      </NativeBaseProvider>\r\n    </KeyboardAvoidingView>\r\n  );\r\n}\r\nfunction AppBar() {\r\n  const { value, setValue } = useContext(UserContext);\r\n  return (\r\n    <>\r\n      <Box safeAreaTop backgroundColor=\"#f2f2f2\" />\r\n\r\n      <HStack bg='amber.300' px=\"5\" justifyContent='space-between' alignItems='center' borderColor=\"gray.300\"\r\n        borderWidth=\"1\">\r\n        <HStack space=\"4\" alignItems='center'>\r\n          <Image style={styles.coin} source={require('../assets/images/crewcoinlogo.png')} />\r\n        </HStack>\r\n        <HStack space=\"4\">\r\n          <Text px=\"1\" style={styles.icon}>\r\n            {value.firstname + \" \" + value.lastname}\r\n          </Text>\r\n        </HStack>\r\n      </HStack>\r\n\r\n    </>\r\n  )\r\n}\r\n\r\nfunction CardBalance() {\r\n  const { value, setValue } = useContext(UserContext);\r\n  return (\r\n    <>\r\n      <VStack borderColor=\"amber.400\"\r\n        borderWidth=\"1\" space=\"2\" bg='amber.300' px=\"2\" justifyContent='space-between' alignItems='center'>\r\n        <Center>\r\n          <HStack >\r\n            <Image style={styles.coinbalance} source={require('../assets/images/coinbalance.png')} />\r\n            <Text bold style={styles.icon2}>{value.balance}</Text>\r\n          </HStack>\r\n        </Center>\r\n      </VStack>\r\n    </>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  icon: {\r\n    color: 'black',\r\n    fontSize: 16,\r\n    fontWeight: 'bold',\r\n\r\n  },\r\n  gif: {\r\n    width: 80,\r\n    height: 80,\r\n    marginTop: -30,\r\n    marginLeft: -30,\r\n  },\r\n  icon2: {\r\n    color: 'black',\r\n    fontSize: 41,\r\n    paddingTop: 23,\r\n    marginTop: 6,\r\n    opacity: 0.9,\r\n    fontFamily: 'System',\r\n  },\r\n  coin: {\r\n    width: 200,\r\n    resizeMode: 'contain',\r\n    height: 50,\r\n    marginLeft: -32,\r\n  },\r\n  coingif: {\r\n    size: '100%',\r\n  },\r\n  coingif: {\r\n    width: 10,\r\n  },\r\n  coinbalance: {\r\n    zIndex: 2,\r\n    resizeMode: 'contain',\r\n    width: 210,\r\n    marginTop: -90,\r\n    marginBottom: -110,\r\n  },\r\n\r\n  image: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: '100%',\r\n    height: '100%',\r\n    resizeMode: 'cover',\r\n  },\r\n  image2: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: '100%',\r\n    height: '100%',\r\n    marginBottom: 20,\r\n    marginBottom: 5,\r\n  },\r\n  image3: {\r\n    width: 45,\r\n    resizeMode: 'contain',\r\n    marginBottom: -85,\r\n    marginTop: -90,\r\n    marginLeft: 35,\r\n  },\r\n  image4: {\r\n    width: 51,\r\n    resizeMode: 'contain',\r\n    marginBottom: -85,\r\n    marginTop: -90,\r\n    marginLeft: 10,\r\n  },\r\n\r\n  image5: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: 450,\r\n    resizeMode: 'cover',\r\n  },\r\n  title: {\r\n    width: 400,\r\n    resizeMode: 'cover',\r\n    marginTop: -100,\r\n    marginBottom: -100,\r\n    margin: -100,\r\n  },\r\n  header: {\r\n    marginTop: '15%',\r\n    marginLeft: '18%',\r\n    justifyContent: 'flex-start',\r\n    alignItems: 'flex-start',\r\n    backgroundColor: '#fff',\r\n  },\r\n  BalanceBar: {\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    borderTopLeftRadius: 60,\r\n    borderTopRightRadius: 60,\r\n  },\r\n  center: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  coin2: {\r\n    width: 80,\r\n    height: 50,\r\n  },\r\n});"]},"metadata":{},"sourceType":"module"}